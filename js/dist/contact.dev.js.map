{"version":3,"sources":["contact.js"],"names":["document","addEventListener","currentYearElement","getElementById","textContent","Date","getFullYear","setTimeout","querySelector","classList","add","style","display","initMap","mapElement","L","Error","map","setView","tileLayer","attribution","maxZoom","addTo","currentLang","localStorage","getItem","qatarMarker","marker","bindPopup","openPopup","tunisiaMarker","qatarCircle","circle","color","fillColor","fillOpacity","radius","tunisiaCircle","Legend","Control","extend","onAdd","div","DomUtil","create","innerHTML","position","console","log","error","showMapError","translations","ar","errorTitle","errorMessage","qatarBranch","tunisiaBranch","alsoContact","en","t","widget","widgetClose","remove","lastScrollTop","window","scrollTop","pageYOffset","documentElement","querySelectorAll","forEach","button","textToCopy","getAttribute","navigator","clipboard","writeText","then","message","showToast","err","messageTextarea","charCount","length","value","contactForm","e","preventDefault","formData","fullName","countryCode","phoneNumber","email","preferredContact","serviceType","urgency","messageSubject","privacyPolicy","checked","whatsappMessage","toLocaleString","trim","encodedMessage","encodeURIComponent","whatsappNumber","whatsappURL","open","reset","clearFormBtn","confirm","fileUpload","fileUploadArea","fileList","preventDefaults","stopPropagation","highlight","unhighlight","handleDrop","dt","dataTransfer","files","updateFileList","fileCountText","header","createElement","className","appendChild","clearFilesBtn","i","file","fileItem","fileIcon","type","startsWith","includes","name","endsWith","fileSize","formatFileSize","size","btn","index","parseInt","removeFile","DataTransfer","items","bytes","k","sizes","Math","floor","parseFloat","pow","toFixed","click","eventName","toast","body","parentNode","removeChild","AOS","init","duration","once","offset","ContactPage","formSubmitted","initializeMap","setupFormValidation","setupCopyButtons","setupFileUpload","setupQuickWidget","setupCharacterCounter","setupFAQAccordion","setupScrollToTop","setupLanguageListener","createPopupContent","addCoverageAreas","addMapLegend","country","isQatar","qatarTitle","tunisiaTitle","phone","whatsapp","coverage","contactBtn","qatar","tunisia","offices","allQatar","allTunisia","callNow","handleFormSubmit","clearForm","setupRealTimeValidation","validateForm","setFormLoading","getFormData","formatWhatsAppMessage","createWhatsAppURL","openWhatsApp","serviceTypeText","selectedOptions","text","timestamp","title","personalInfo","serviceInfo","subject","submitted","notProvided","any","normal","urgent","emergency","urgencyMap","contactMethodMap","url","newWindow","showSuccessMessage","trackFormSubmission","successMessage","errorText","isLoading","submitBtn","loader","disabled","inputs","input","validateField","clearFieldError","field","fieldName","id","showFieldError","phoneRegex","test","isValidEmail","errorDiv","fontSize","marginTop","borderColor","emailRegex","copyToClipboard","handleFileSelect","setupDragAndDrop","maxSize","allowedTypes","match","push","dropArea","fileInput","element","event","Event","bubbles","dispatchEvent","createFileItem","getFileIcon","splice","setupWidgetScrollBehavior","maxLength","substring","faqItems","item","question","otherItem","contains","toggle","scrollBtn","scrollTo","top","behavior","detail","language","updateContentLanguage","eachLayer","layer","popup","getPopup","gtag"],"mappings":";;;;;;;;AAAA;;;;AAIQA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAW;AACrD;AACA,MAAMC,kBAAkB,GAAGF,QAAQ,CAACG,cAAT,CAAwB,aAAxB,CAA3B;;AACA,MAAID,kBAAJ,EAAwB;AACpBA,IAAAA,kBAAkB,CAACE,WAAnB,GAAiC,IAAIC,IAAJ,GAAWC,WAAX,EAAjC;AACH,GALoD,CAOrD;;;AACAC,EAAAA,UAAU,CAAC,YAAW;AAClBP,IAAAA,QAAQ,CAACQ,aAAT,CAAuB,kBAAvB,EAA2CC,SAA3C,CAAqDC,GAArD,CAAyD,QAAzD;AACH,GAFS,EAEP,GAFO,CAAV;AAIAH,EAAAA,UAAU,CAAC,YAAW;AAClBP,IAAAA,QAAQ,CAACQ,aAAT,CAAuB,kBAAvB,EAA2CG,KAA3C,CAAiDC,OAAjD,GAA2D,MAA3D;AACH,GAFS,EAEP,IAFO,CAAV,CAZqD,CAgBrD;;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB,QAAMC,UAAU,GAAGd,QAAQ,CAACG,cAAT,CAAwB,YAAxB,CAAnB;AACA,QAAI,CAACW,UAAL,EAAiB;;AAEjB,QAAI;AACA,UAAI,OAAOC,CAAP,KAAa,WAAjB,EAA8B;AAC1B,cAAM,IAAIC,KAAJ,CAAU,4BAAV,CAAN;AACH,OAHD,CAKA;;;AACA,UAAMC,GAAG,GAAGF,CAAC,CAACE,GAAF,CAAM,YAAN,EAAoBC,OAApB,CAA4B,CAAC,IAAD,EAAO,IAAP,CAA5B,EAA0C,CAA1C,CAAZ,CANA,CAQA;;AACAH,MAAAA,CAAC,CAACI,SAAF,CAAY,oDAAZ,EAAkE;AAC9DC,QAAAA,WAAW,EAAE,8BADiD;AAE9DC,QAAAA,OAAO,EAAE;AAFqD,OAAlE,EAGGC,KAHH,CAGSL,GAHT,EATA,CAcA;;AACA,UAAMM,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAAxD,CAfA,CAiBA;;AACA,UAAMC,WAAW,GAAGX,CAAC,CAACY,MAAF,CAAS,CAAC,OAAD,EAAU,OAAV,CAAT,EAA6BL,KAA7B,CAAmCL,GAAnC,EACfW,SADe,wGAGFL,WAAW,KAAK,IAAhB,GAAuB,yBAAvB,GAAmD,sBAHjD,mRAMmCA,WAAW,KAAK,IAAhB,GAAuB,0BAAvB,GAAoD,sBANvF,4WAS8BA,WAAW,KAAK,IAAhB,GAAuB,qBAAvB,GAA+C,kBAT7E,2GAafM,SAbe,EAApB,CAlBA,CAiCA;;AACA,UAAMC,aAAa,GAAGf,CAAC,CAACY,MAAF,CAAS,CAAC,OAAD,EAAU,OAAV,CAAT,EAA6BL,KAA7B,CAAmCL,GAAnC,EACjBW,SADiB,wGAGJL,WAAW,KAAK,IAAhB,GAAuB,2BAAvB,GAAqD,uBAHjD,mRAMiCA,WAAW,KAAK,IAAhB,GAAuB,4BAAvB,GAAsD,uBANvF,4WAS4BA,WAAW,KAAK,IAAhB,GAAuB,qBAAvB,GAA+C,kBAT3E,0GAAtB,CAlCA,CAgDA;;AACA,UAAMQ,WAAW,GAAGhB,CAAC,CAACiB,MAAF,CAAS,CAAC,OAAD,EAAU,OAAV,CAAT,EAA6B;AAC7CC,QAAAA,KAAK,EAAE,SADsC;AAE7CC,QAAAA,SAAS,EAAE,SAFkC;AAG7CC,QAAAA,WAAW,EAAE,GAHgC;AAI7CC,QAAAA,MAAM,EAAE;AAJqC,OAA7B,EAKjBd,KALiB,CAKXL,GALW,EAKNW,SALM,CAKIL,WAAW,KAAK,IAAhB,GAAuB,qBAAvB,GAA+C,sBALnD,CAApB;AAOA,UAAMc,aAAa,GAAGtB,CAAC,CAACiB,MAAF,CAAS,CAAC,OAAD,EAAU,OAAV,CAAT,EAA6B;AAC/CC,QAAAA,KAAK,EAAE,SADwC;AAE/CC,QAAAA,SAAS,EAAE,SAFoC;AAG/CC,QAAAA,WAAW,EAAE,GAHkC;AAI/CC,QAAAA,MAAM,EAAE;AAJuC,OAA7B,EAKnBd,KALmB,CAKbL,GALa,EAKRW,SALQ,CAKEL,WAAW,KAAK,IAAhB,GAAuB,uBAAvB,GAAiD,uBALnD,CAAtB,CAxDA,CA+DA;;AACA,UAAMe,MAAM,GAAGvB,CAAC,CAACwB,OAAF,CAAUC,MAAV,CAAiB;AAC5BC,QAAAA,KAAK,EAAE,eAASxB,GAAT,EAAc;AACjB,cAAMyB,GAAG,GAAG3B,CAAC,CAAC4B,OAAF,CAAUC,MAAV,CAAiB,KAAjB,EAAwB,YAAxB,CAAZ;AACAF,UAAAA,GAAG,CAACG,SAAJ,mDACUtB,WAAW,KAAK,IAAhB,GAAuB,gBAAvB,GAA0C,eADpD,oOAIgBA,WAAW,KAAK,IAAhB,GAAuB,gBAAvB,GAA0C,WAJ1D,8QAQgBA,WAAW,KAAK,IAAhB,GAAuB,kBAAvB,GAA4C,YAR5D,8QAYgBA,WAAW,KAAK,IAAhB,GAAuB,cAAvB,GAAwC,kBAZxD;AAeA,iBAAOmB,GAAP;AACH;AAnB2B,OAAjB,CAAf;AAsBA,UAAIJ,MAAJ,CAAW;AAAEQ,QAAAA,QAAQ,EAAE;AAAZ,OAAX,EAAwCxB,KAAxC,CAA8CL,GAA9C;AAEA8B,MAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AAEH,KA1FD,CA0FE,OAAOC,KAAP,EAAc;AACZF,MAAAA,OAAO,CAACE,KAAR,CAAc,yBAAd,EAAyCA,KAAzC;AACAC,MAAAA,YAAY;AACf;AACJ,GAlGD,CAjBqD,CAqHrD;;;AACA,WAASA,YAAT,GAAwB;AACpB,QAAMpC,UAAU,GAAGd,QAAQ,CAACG,cAAT,CAAwB,YAAxB,CAAnB;;AACA,QAAIW,UAAJ,EAAgB;AACZ,UAAMS,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAAxD;AACA,UAAM0B,YAAY,GAAG;AACjBC,QAAAA,EAAE,EAAE;AACAC,UAAAA,UAAU,EAAE,oBADZ;AAEAC,UAAAA,YAAY,EAAE,0EAFd;AAGAC,UAAAA,WAAW,EAAE,SAHb;AAIAC,UAAAA,aAAa,EAAE,UAJf;AAKAC,UAAAA,WAAW,EAAE;AALb,SADa;AAQjBC,QAAAA,EAAE,EAAE;AACAL,UAAAA,UAAU,EAAE,oBADZ;AAEAC,UAAAA,YAAY,EAAE,4FAFd;AAGAC,UAAAA,WAAW,EAAE,cAHb;AAIAC,UAAAA,aAAa,EAAE,gBAJf;AAKAC,UAAAA,WAAW,EAAE;AALb;AARa,OAArB;AAiBA,UAAME,CAAC,GAAGR,YAAY,CAAC5B,WAAD,CAAZ,IAA6B4B,YAAY,CAACC,EAApD;AAEAtC,MAAAA,UAAU,CAAC+B,SAAX,qRAKcc,CAAC,CAACN,UALhB,mDAMaM,CAAC,CAACL,YANf,4bAa8BK,CAAC,CAACJ,WAbhC,8HAcsFhC,WAAW,KAAK,IAAhB,GAAuB,iBAAvB,GAA2C,gBAdjI,osBAwBgCA,WAAW,KAAK,IAAhB,GAAuB,UAAvB,GAAoC,WAxBpE,ugBAiC8BoC,CAAC,CAACH,aAjChC,8HAkCsFjC,WAAW,KAAK,IAAhB,GAAuB,mBAAvB,GAA6C,iBAlCnI,osBA4CgCA,WAAW,KAAK,IAAhB,GAAuB,UAAvB,GAAoC,WA5CpE,4YAmDyBoC,CAAC,CAACF,WAnD3B;AAyDH;AACJ,GAvMoD,CAyMrD;;;AACAlD,EAAAA,UAAU,CAAC,YAAM;AACbM,IAAAA,OAAO;AACV,GAFS,EAEP,GAFO,CAAV,CA1MqD,CA8MrD;;AACA,MAAM+C,MAAM,GAAG5D,QAAQ,CAACQ,aAAT,CAAuB,uBAAvB,CAAf;AACA,MAAMqD,WAAW,GAAG7D,QAAQ,CAACQ,aAAT,CAAuB,eAAvB,CAApB;;AAEA,MAAIoD,MAAM,IAAIC,WAAd,EAA2B;AACvB;AACAtD,IAAAA,UAAU,CAAC,YAAM;AACbqD,MAAAA,MAAM,CAACnD,SAAP,CAAiBC,GAAjB,CAAqB,QAArB;AACH,KAFS,EAEP,IAFO,CAAV,CAFuB,CAMvB;;AACAmD,IAAAA,WAAW,CAAC5D,gBAAZ,CAA6B,OAA7B,EAAsC,YAAW;AAC7C2D,MAAAA,MAAM,CAACnD,SAAP,CAAiBqD,MAAjB,CAAwB,QAAxB;AACH,KAFD,EAPuB,CAWvB;;AACA,QAAIC,aAAa,GAAG,CAApB;AACAC,IAAAA,MAAM,CAAC/D,gBAAP,CAAwB,QAAxB,EAAkC,YAAW;AACzC,UAAMgE,SAAS,GAAGD,MAAM,CAACE,WAAP,IAAsBlE,QAAQ,CAACmE,eAAT,CAAyBF,SAAjE;;AAEA,UAAIA,SAAS,GAAGF,aAAhB,EAA+B;AAC3B;AACAH,QAAAA,MAAM,CAACnD,SAAP,CAAiBqD,MAAjB,CAAwB,QAAxB;AACH,OAHD,MAGO;AACH;AACA,YAAIG,SAAS,GAAG,GAAhB,EAAqB;AACjBL,UAAAA,MAAM,CAACnD,SAAP,CAAiBC,GAAjB,CAAqB,QAArB;AACH;AACJ;;AAEDqD,MAAAA,aAAa,GAAGE,SAAhB;AACH,KAdD;AAeH,GA9OoD,CAgPrD;;;AACAjE,EAAAA,QAAQ,CAACoE,gBAAT,CAA0B,WAA1B,EAAuCC,OAAvC,CAA+C,UAAAC,MAAM,EAAI;AACrDA,IAAAA,MAAM,CAACrE,gBAAP,CAAwB,OAAxB,EAAiC,YAAW;AACxC,UAAMsE,UAAU,GAAG,KAAKC,YAAL,CAAkB,WAAlB,KAAkC,KAAKA,YAAL,CAAkB,aAAlB,CAArD;;AACA,UAAID,UAAJ,EAAgB;AACZE,QAAAA,SAAS,CAACC,SAAV,CAAoBC,SAApB,CAA8BJ,UAA9B,EAA0CK,IAA1C,CAA+C,YAAM;AACjD,cAAMrD,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAAxD;AACA,cAAMoD,OAAO,GAAGtD,WAAW,KAAK,IAAhB,GAAuB,sBAAvB,GAAgD,uBAAhE;AACAuD,UAAAA,SAAS,CAACD,OAAD,EAAU,SAAV,CAAT;AACH,SAJD,WAIS,UAAAE,GAAG,EAAI;AACZhC,UAAAA,OAAO,CAACE,KAAR,CAAc,kBAAd,EAAkC8B,GAAlC;AACH,SAND;AAOH;AACJ,KAXD;AAYH,GAbD,EAjPqD,CAgQrD;;AACA,MAAMC,eAAe,GAAGhF,QAAQ,CAACG,cAAT,CAAwB,SAAxB,CAAxB;AACA,MAAM8E,SAAS,GAAGjF,QAAQ,CAACQ,aAAT,CAAuB,aAAvB,CAAlB;;AAEA,MAAIwE,eAAe,IAAIC,SAAvB,EAAkC;AAC9BD,IAAAA,eAAe,CAAC/E,gBAAhB,CAAiC,OAAjC,EAA0C,YAAW;AACjD,UAAMiF,MAAM,GAAG,KAAKC,KAAL,CAAWD,MAA1B;AACAD,MAAAA,SAAS,CAAC7E,WAAV,GAAwB8E,MAAM,GAAG,QAAT,IAAqB1D,YAAY,CAACC,OAAb,CAAqB,UAArB,MAAqC,IAArC,GAA4C,YAA5C,GAA2D,KAAhF,CAAxB;;AAEA,UAAIyD,MAAM,GAAG,IAAb,EAAmB;AACfD,QAAAA,SAAS,CAACtE,KAAV,CAAgBsB,KAAhB,GAAwB,SAAxB;AACH,OAFD,MAEO,IAAIiD,MAAM,GAAG,IAAb,EAAmB;AACtBD,QAAAA,SAAS,CAACtE,KAAV,CAAgBsB,KAAhB,GAAwB,SAAxB;AACH,OAFM,MAEA;AACHgD,QAAAA,SAAS,CAACtE,KAAV,CAAgBsB,KAAhB,GAAwB,MAAxB;AACH;AACJ,KAXD;AAYH,GAjRoD,CAmRrD;;;AACA,MAAMmD,WAAW,GAAGpF,QAAQ,CAACG,cAAT,CAAwB,aAAxB,CAApB;;AACA,MAAIiF,WAAJ,EAAiB;AACbA,IAAAA,WAAW,CAACnF,gBAAZ,CAA6B,QAA7B,EAAuC,UAASoF,CAAT,EAAY;AAC/CA,MAAAA,CAAC,CAACC,cAAF,GAD+C,CAG/C;;AACA,UAAMC,QAAQ,GAAG;AACbC,QAAAA,QAAQ,EAAExF,QAAQ,CAACG,cAAT,CAAwB,UAAxB,EAAoCgF,KADjC;AAEbM,QAAAA,WAAW,EAAEzF,QAAQ,CAACG,cAAT,CAAwB,aAAxB,EAAuCgF,KAFvC;AAGbO,QAAAA,WAAW,EAAE1F,QAAQ,CAACG,cAAT,CAAwB,aAAxB,EAAuCgF,KAHvC;AAIbQ,QAAAA,KAAK,EAAE3F,QAAQ,CAACG,cAAT,CAAwB,OAAxB,EAAiCgF,KAJ3B;AAKbS,QAAAA,gBAAgB,EAAE5F,QAAQ,CAACG,cAAT,CAAwB,kBAAxB,EAA4CgF,KALjD;AAMbU,QAAAA,WAAW,EAAE7F,QAAQ,CAACG,cAAT,CAAwB,aAAxB,EAAuCgF,KANvC;AAObW,QAAAA,OAAO,EAAE9F,QAAQ,CAACG,cAAT,CAAwB,SAAxB,EAAmCgF,KAP/B;AAQbY,QAAAA,cAAc,EAAE/F,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,EAA0CgF,KAR7C;AASbN,QAAAA,OAAO,EAAE7E,QAAQ,CAACG,cAAT,CAAwB,SAAxB,EAAmCgF,KAT/B;AAUba,QAAAA,aAAa,EAAEhG,QAAQ,CAACG,cAAT,CAAwB,eAAxB,EAAyC8F;AAV3C,OAAjB,CAJ+C,CAiB/C;;AACA,UAAI,CAACV,QAAQ,CAACS,aAAd,EAA6B;AACzB,YAAMzE,YAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAAxD;;AACA,YAAMoD,QAAO,GAAGtD,YAAW,KAAK,IAAhB,GACV,kCADU,GAEV,kCAFN;;AAGAuD,QAAAA,SAAS,CAACD,QAAD,EAAU,OAAV,CAAT;AACA;AACH,OAzB8C,CA2B/C;;;AACA,UAAMqB,eAAe,GAAG,iHAIlCX,QAAQ,CAACC,QAJyB,6BAKjCD,QAAQ,CAACE,WALwB,cAKTF,QAAQ,CAACG,WALA,6BAMjCH,QAAQ,CAACI,KAAT,IAAkB,cANe,yCAOrBJ,QAAQ,CAACK,gBAPY,2EAU1BL,QAAQ,CAACM,WAViB,+BAW/BN,QAAQ,CAACO,OAXsB,+BAY/BP,QAAQ,CAACQ,cAZsB,0CAe1CR,QAAQ,CAACV,OAfiC,8CAiBvB,IAAIxE,IAAJ,GAAW8F,cAAX,EAjBuB,4BAkBtBC,IAlBsB,EAAxB,CA5B+C,CAgD/C;;AACA,UAAMC,cAAc,GAAGC,kBAAkB,CAACJ,eAAD,CAAzC;AACA,UAAMK,cAAc,GAAGhB,QAAQ,CAACE,WAAT,KAAyB,MAAzB,GAAkC,aAAlC,GAAkD,aAAzE;AACA,UAAMe,WAAW,2BAAoBD,cAApB,mBAA2CF,cAA3C,CAAjB,CAnD+C,CAqD/C;;AACArC,MAAAA,MAAM,CAACyC,IAAP,CAAYD,WAAZ,EAAyB,QAAzB,EAtD+C,CAwD/C;;AACA,UAAMjF,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAAxD;AACA,UAAMoD,OAAO,GAAGtD,WAAW,KAAK,IAAhB,GACV,kDADU,GAEV,8CAFN;AAGAuD,MAAAA,SAAS,CAACD,OAAD,EAAU,SAAV,CAAT,CA7D+C,CA+D/C;;AACAtE,MAAAA,UAAU,CAAC,YAAM;AACb6E,QAAAA,WAAW,CAACsB,KAAZ;;AACA,YAAIzB,SAAJ,EAAe;AACXA,UAAAA,SAAS,CAAC7E,WAAV,GAAwB,aAAamB,WAAW,KAAK,IAAhB,GAAuB,YAAvB,GAAsC,KAAnD,CAAxB;AACA0D,UAAAA,SAAS,CAACtE,KAAV,CAAgBsB,KAAhB,GAAwB,MAAxB;AACH;AACJ,OANS,EAMP,IANO,CAAV;AAOH,KAvED;AAwEH,GA9VoD,CAgWrD;;;AACA,MAAM0E,YAAY,GAAG3G,QAAQ,CAACG,cAAT,CAAwB,WAAxB,CAArB;;AACA,MAAIwG,YAAJ,EAAkB;AACdA,IAAAA,YAAY,CAAC1G,gBAAb,CAA8B,OAA9B,EAAuC,YAAW;AAC9C,UAAI2G,OAAO,CAACpF,YAAY,CAACC,OAAb,CAAqB,UAArB,MAAqC,IAArC,GACN,0CADM,GAEN,8BAFK,CAAX,EAEuC;AACnC2D,QAAAA,WAAW,CAACsB,KAAZ;AACA,YAAMnF,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAAxD;;AACA,YAAIwD,SAAJ,EAAe;AACXA,UAAAA,SAAS,CAAC7E,WAAV,GAAwB,aAAamB,WAAW,KAAK,IAAhB,GAAuB,YAAvB,GAAsC,KAAnD,CAAxB;AACA0D,UAAAA,SAAS,CAACtE,KAAV,CAAgBsB,KAAhB,GAAwB,MAAxB;AACH;;AACD6C,QAAAA,SAAS,CAACvD,WAAW,KAAK,IAAhB,GAAuB,cAAvB,GAAwC,gBAAzC,EAA2D,MAA3D,CAAT;AACH;AACJ,KAZD;AAaH,GAhXoD,CAkXrD;;;AACA,MAAMsF,UAAU,GAAG7G,QAAQ,CAACG,cAAT,CAAwB,YAAxB,CAAnB;AACA,MAAM2G,cAAc,GAAG9G,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,CAAvB;AACA,MAAM4G,QAAQ,GAAG/G,QAAQ,CAACG,cAAT,CAAwB,UAAxB,CAAjB;;AAEA,MAAI0G,UAAU,IAAIC,cAAlB,EAAkC;AAAA,QAgBrBE,eAhBqB,GAgB9B,SAASA,eAAT,CAAyB3B,CAAzB,EAA4B;AACxBA,MAAAA,CAAC,CAACC,cAAF;AACAD,MAAAA,CAAC,CAAC4B,eAAF;AACH,KAnB6B;;AAAA,QA6BrBC,SA7BqB,GA6B9B,SAASA,SAAT,GAAqB;AACjBJ,MAAAA,cAAc,CAACrG,SAAf,CAAyBC,GAAzB,CAA6B,WAA7B;AACH,KA/B6B;;AAAA,QAiCrByG,WAjCqB,GAiC9B,SAASA,WAAT,GAAuB;AACnBL,MAAAA,cAAc,CAACrG,SAAf,CAAyBqD,MAAzB,CAAgC,WAAhC;AACH,KAnC6B;;AAAA,QAuCrBsD,UAvCqB,GAuC9B,SAASA,UAAT,CAAoB/B,CAApB,EAAuB;AACnB,UAAMgC,EAAE,GAAGhC,CAAC,CAACiC,YAAb;AACA,UAAMC,KAAK,GAAGF,EAAE,CAACE,KAAjB;AACAV,MAAAA,UAAU,CAACU,KAAX,GAAmBA,KAAnB;AACAC,MAAAA,cAAc;AACjB,KA5C6B;;AAAA,QA8CrBA,cA9CqB,GA8C9B,SAASA,cAAT,GAA0B;AACtB,UAAI,CAACT,QAAL,EAAe;AAEfA,MAAAA,QAAQ,CAAClE,SAAT,GAAqB,EAArB;AACA,UAAM0E,KAAK,GAAGV,UAAU,CAACU,KAAzB;;AAEA,UAAIA,KAAK,CAACrC,MAAN,KAAiB,CAArB,EAAwB;AACpB;AACH;;AAED,UAAM3D,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAAxD;AACA,UAAMgG,aAAa,GAAGlG,WAAW,KAAK,IAAhB,aACbgG,KAAK,CAACrC,MADO,qFAEHqC,KAAK,CAACrC,MAFH,sCAAtB;AAIA,UAAMwC,MAAM,GAAG1H,QAAQ,CAAC2H,aAAT,CAAuB,KAAvB,CAAf;AACAD,MAAAA,MAAM,CAACE,SAAP,GAAmB,kBAAnB;AACAF,MAAAA,MAAM,CAAC7E,SAAP,6CACY4E,aADZ,8HAGUlG,WAAW,KAAK,IAAhB,GAAuB,WAAvB,GAAqC,UAH/C;AAMAwF,MAAAA,QAAQ,CAACc,WAAT,CAAqBH,MAArB,EAvBsB,CAyBtB;;AACA,UAAMI,aAAa,GAAGJ,MAAM,CAAClH,aAAP,CAAqB,kBAArB,CAAtB;AACAsH,MAAAA,aAAa,CAAC7H,gBAAd,CAA+B,OAA/B,EAAwC,YAAW;AAC/C4G,QAAAA,UAAU,CAAC1B,KAAX,GAAmB,EAAnB;AACAqC,QAAAA,cAAc;AACjB,OAHD,EA3BsB,CAgCtB;;AACA,WAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,KAAK,CAACrC,MAA1B,EAAkC6C,CAAC,EAAnC,EAAuC;AACnC,YAAMC,IAAI,GAAGT,KAAK,CAACQ,CAAD,CAAlB;AACA,YAAME,QAAQ,GAAGjI,QAAQ,CAAC2H,aAAT,CAAuB,KAAvB,CAAjB;AACAM,QAAAA,QAAQ,CAACL,SAAT,GAAqB,WAArB,CAHmC,CAKnC;;AACA,YAAIM,QAAQ,GAAG,SAAf;;AACA,YAAIF,IAAI,CAACG,IAAL,CAAUC,UAAV,CAAqB,QAArB,CAAJ,EAAoC;AAChCF,UAAAA,QAAQ,GAAG,eAAX;AACH,SAFD,MAEO,IAAIF,IAAI,CAACG,IAAL,KAAc,iBAAlB,EAAqC;AACxCD,UAAAA,QAAQ,GAAG,aAAX;AACH,SAFM,MAEA,IAAIF,IAAI,CAACG,IAAL,CAAUE,QAAV,CAAmB,MAAnB,KAA8BL,IAAI,CAACM,IAAL,CAAUC,QAAV,CAAmB,MAAnB,CAA9B,IAA4DP,IAAI,CAACM,IAAL,CAAUC,QAAV,CAAmB,OAAnB,CAAhE,EAA6F;AAChGL,UAAAA,QAAQ,GAAG,cAAX;AACH,SAbkC,CAenC;;;AACA,YAAMM,QAAQ,GAAGC,cAAc,CAACT,IAAI,CAACU,IAAN,CAA/B;AAEAT,QAAAA,QAAQ,CAACpF,SAAT,qHAEwBqF,QAFxB,2HAIsCF,IAAI,CAACM,IAJ3C,oFAKsCE,QALtC,6LAQgET,CARhE;AAaAhB,QAAAA,QAAQ,CAACc,WAAT,CAAqBI,QAArB;AACH,OAjEqB,CAmEtB;;;AACAlB,MAAAA,QAAQ,CAAC3C,gBAAT,CAA0B,kBAA1B,EAA8CC,OAA9C,CAAsD,UAAAsE,GAAG,EAAI;AACzDA,QAAAA,GAAG,CAAC1I,gBAAJ,CAAqB,OAArB,EAA8B,YAAW;AACrC,cAAM2I,KAAK,GAAGC,QAAQ,CAAC,KAAKrE,YAAL,CAAkB,YAAlB,CAAD,CAAtB;AACAsE,UAAAA,UAAU,CAACF,KAAD,CAAV;AACH,SAHD;AAIH,OALD;AAMH,KAxH6B;;AAAA,QA0HrBE,UA1HqB,GA0H9B,SAASA,UAAT,CAAoBF,KAApB,EAA2B;AACvB,UAAMvB,EAAE,GAAG,IAAI0B,YAAJ,EAAX;AACA,UAAMxB,KAAK,GAAGV,UAAU,CAACU,KAAzB;;AAEA,WAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,KAAK,CAACrC,MAA1B,EAAkC6C,CAAC,EAAnC,EAAuC;AACnC,YAAIA,CAAC,KAAKa,KAAV,EAAiB;AACbvB,UAAAA,EAAE,CAAC2B,KAAH,CAAStI,GAAT,CAAa6G,KAAK,CAACQ,CAAD,CAAlB;AACH;AACJ;;AAEDlB,MAAAA,UAAU,CAACU,KAAX,GAAmBF,EAAE,CAACE,KAAtB;AACAC,MAAAA,cAAc;AACjB,KAtI6B;;AAAA,QAwIrBiB,cAxIqB,GAwI9B,SAASA,cAAT,CAAwBQ,KAAxB,EAA+B;AAC3B,UAAIA,KAAK,KAAK,CAAd,EAAiB,OAAO,SAAP;AACjB,UAAMC,CAAC,GAAG,IAAV;AACA,UAAMC,KAAK,GAAG,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,EAAsB,IAAtB,CAAd;AACA,UAAMpB,CAAC,GAAGqB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACpG,GAAL,CAASiG,KAAT,IAAkBG,IAAI,CAACpG,GAAL,CAASkG,CAAT,CAA7B,CAAV;AACA,aAAOI,UAAU,CAAC,CAACL,KAAK,GAAGG,IAAI,CAACG,GAAL,CAASL,CAAT,EAAYnB,CAAZ,CAAT,EAAyByB,OAAzB,CAAiC,CAAjC,CAAD,CAAV,GAAkD,GAAlD,GAAwDL,KAAK,CAACpB,CAAD,CAApE;AACH,KA9I6B;;AAC9B;AACAjB,IAAAA,cAAc,CAAC7G,gBAAf,CAAgC,OAAhC,EAAyC,YAAW;AAChD4G,MAAAA,UAAU,CAAC4C,KAAX;AACH,KAFD,EAF8B,CAM9B;;AACA5C,IAAAA,UAAU,CAAC5G,gBAAX,CAA4B,QAA5B,EAAsC,YAAW;AAC7CuH,MAAAA,cAAc;AACjB,KAFD,EAP8B,CAW9B;;AACA,KAAC,WAAD,EAAc,UAAd,EAA0B,WAA1B,EAAuC,MAAvC,EAA+CnD,OAA/C,CAAuD,UAAAqF,SAAS,EAAI;AAChE5C,MAAAA,cAAc,CAAC7G,gBAAf,CAAgCyJ,SAAhC,EAA2C1C,eAA3C,EAA4D,KAA5D;AACH,KAFD;AASA,KAAC,WAAD,EAAc,UAAd,EAA0B3C,OAA1B,CAAkC,UAAAqF,SAAS,EAAI;AAC3C5C,MAAAA,cAAc,CAAC7G,gBAAf,CAAgCyJ,SAAhC,EAA2CxC,SAA3C,EAAsD,KAAtD;AACH,KAFD;AAIA,KAAC,WAAD,EAAc,MAAd,EAAsB7C,OAAtB,CAA8B,UAAAqF,SAAS,EAAI;AACvC5C,MAAAA,cAAc,CAAC7G,gBAAf,CAAgCyJ,SAAhC,EAA2CvC,WAA3C,EAAwD,KAAxD;AACH,KAFD;AAYAL,IAAAA,cAAc,CAAC7G,gBAAf,CAAgC,MAAhC,EAAwCmH,UAAxC,EAAoD,KAApD;AA0GH,GAtgBoD,CAwgBrD;;;AACA,WAAStC,SAAT,CAAmBD,OAAnB,EAA2C;AAAA,QAAfsD,IAAe,uEAAR,MAAQ;AACvC;AACAnI,IAAAA,QAAQ,CAACoE,gBAAT,CAA0B,gBAA1B,EAA4CC,OAA5C,CAAoD,UAAAsF,KAAK;AAAA,aAAIA,KAAK,CAAC7F,MAAN,EAAJ;AAAA,KAAzD;AAEA,QAAM6F,KAAK,GAAG3J,QAAQ,CAAC2H,aAAT,CAAuB,KAAvB,CAAd;AACAgC,IAAAA,KAAK,CAAC/B,SAAN,2BAAmCO,IAAnC;AACAwB,IAAAA,KAAK,CAACvJ,WAAN,GAAoByE,OAApB;AACA7E,IAAAA,QAAQ,CAAC4J,IAAT,CAAc/B,WAAd,CAA0B8B,KAA1B,EAPuC,CASvC;;AACApJ,IAAAA,UAAU,CAAC,YAAM;AACb,UAAIoJ,KAAK,CAACE,UAAV,EAAsB;AAClBF,QAAAA,KAAK,CAACE,UAAN,CAAiBC,WAAjB,CAA6BH,KAA7B;AACH;AACJ,KAJS,EAIP,IAJO,CAAV;AAKH,GAxhBoD,CA0hBrD;;;AACA,MAAI,OAAOI,GAAP,KAAe,WAAnB,EAAgC;AAC5BA,IAAAA,GAAG,CAACC,IAAJ,CAAS;AACLC,MAAAA,QAAQ,EAAE,GADL;AAELC,MAAAA,IAAI,EAAE,IAFD;AAGLC,MAAAA,MAAM,EAAE;AAHH,KAAT;AAKH;AACJ,CAliBD;;IAmiBFC,W;;;AACF,yBAAc;AAAA;;AACV,SAAKnJ,GAAL,GAAW,IAAX;AACA,SAAKoJ,aAAL,GAAqB,KAArB;AACA,SAAK9C,KAAL,GAAa,EAAb;AACA,SAAKhG,WAAL,GAAmBC,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAAvD;AACA,SAAKuI,IAAL;AACH;;;;2BAEM;AACH,WAAKM,aAAL;AACA,WAAKC,mBAAL;AACA,WAAKC,gBAAL;AACA,WAAKC,eAAL;AACA,WAAKC,gBAAL;AACA,WAAKC,qBAAL;AACA,WAAKC,iBAAL;AACA,WAAKC,gBAAL;AACA,WAAKC,qBAAL;AACH;AAED;;;;;;oCAGgB;AACZ,UAAMhK,UAAU,GAAGd,QAAQ,CAACG,cAAT,CAAwB,YAAxB,CAAnB;AACA,UAAI,CAACW,UAAL,EAAiB;;AAEjB,UAAI;AACA;AACA,YAAI,OAAOC,CAAP,KAAa,WAAjB,EAA8B;AAC1B,gBAAM,IAAIC,KAAJ,CAAU,4BAAV,CAAN;AACH,SAJD,CAMA;;;AACA,aAAKC,GAAL,GAAWF,CAAC,CAACE,GAAF,CAAM,YAAN,EAAoBC,OAApB,CAA4B,CAAC,IAAD,EAAO,IAAP,CAA5B,EAA0C,CAA1C,CAAX,CAPA,CASA;;AACAH,QAAAA,CAAC,CAACI,SAAF,CAAY,oDAAZ,EAAkE;AAC9DC,UAAAA,WAAW,EAAE,8BADiD;AAE9DC,UAAAA,OAAO,EAAE;AAFqD,SAAlE,EAGGC,KAHH,CAGS,KAAKL,GAHd,EAVA,CAeA;;AACA,YAAMS,WAAW,GAAGX,CAAC,CAACY,MAAF,CAAS,CAAC,OAAD,EAAU,OAAV,CAAT,EAA6BL,KAA7B,CAAmC,KAAKL,GAAxC,EACfW,SADe,CACL,KAAKmJ,kBAAL,CAAwB,OAAxB,CADK,EAEflJ,SAFe,EAApB,CAhBA,CAoBA;;AACA,YAAMC,aAAa,GAAGf,CAAC,CAACY,MAAF,CAAS,CAAC,OAAD,EAAU,OAAV,CAAT,EAA6BL,KAA7B,CAAmC,KAAKL,GAAxC,EACjBW,SADiB,CACP,KAAKmJ,kBAAL,CAAwB,SAAxB,CADO,CAAtB,CArBA,CAwBA;;AACA,aAAKC,gBAAL,GAzBA,CA2BA;;AACA,aAAKC,YAAL;AAEAlI,QAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AAEH,OAhCD,CAgCE,OAAOC,KAAP,EAAc;AACZF,QAAAA,OAAO,CAACE,KAAR,CAAc,yBAAd,EAAyCA,KAAzC;AACA,aAAKC,YAAL;AACH;AACJ;AAED;;;;;;uCAGmBgI,O,EAAS;AACxB,UAAMC,OAAO,GAAGD,OAAO,KAAK,OAA5B;AACA,UAAM/H,YAAY,GAAG;AACjBC,QAAAA,EAAE,EAAE;AACAgI,UAAAA,UAAU,EAAE,sBADZ;AAEAC,UAAAA,YAAY,EAAE,uBAFd;AAGAC,UAAAA,KAAK,EAAE,QAHP;AAIAC,UAAAA,QAAQ,EAAE,cAJV;AAKAC,UAAAA,QAAQ,EAAE,oBALV;AAMAC,UAAAA,UAAU,EAAE;AANZ,SADa;AASjB/H,QAAAA,EAAE,EAAE;AACA0H,UAAAA,UAAU,EAAE,yBADZ;AAEAC,UAAAA,YAAY,EAAE,2BAFd;AAGAC,UAAAA,KAAK,EAAE,OAHP;AAIAC,UAAAA,QAAQ,EAAE,oBAJV;AAKAC,UAAAA,QAAQ,EAAE,oBALV;AAMAC,UAAAA,UAAU,EAAE;AANZ;AATa,OAArB;AAmBA,UAAM9H,CAAC,GAAGR,YAAY,CAAC,KAAK5B,WAAN,CAAZ,IAAkC4B,YAAY,CAACC,EAAzD;AACA,UAAMkI,KAAK,GAAGH,OAAO,GAAG,iBAAH,GAAuB,iBAA5C;AACA,UAAMI,QAAQ,GAAGJ,OAAO,GAAG,aAAH,GAAmB,aAA3C;AAEA,oFAEcA,OAAO,GAAGxH,CAAC,CAACyH,UAAL,GAAkBzH,CAAC,CAAC0H,YAFzC,sEAG0CC,KAH1C,wEAI6C3H,CAAC,CAAC4H,QAJ/C,8EAKmD5H,CAAC,CAAC6H,QALrD,2DAMiCD,QANjC,uIAQ8C5H,CAAC,CAAC8H,UARhD;AAYH;AAED;;;;;;uCAGmB;AACf;AACA1K,MAAAA,CAAC,CAACiB,MAAF,CAAS,CAAC,OAAD,EAAU,OAAV,CAAT,EAA6B;AACzBC,QAAAA,KAAK,EAAE,SADkB;AAEzBC,QAAAA,SAAS,EAAE,SAFc;AAGzBC,QAAAA,WAAW,EAAE,GAHY;AAIzBC,QAAAA,MAAM,EAAE;AAJiB,OAA7B,EAKGd,KALH,CAKS,KAAKL,GALd,EAKmBW,SALnB,CAK6B,KAAKL,WAAL,KAAqB,IAArB,GACvB,qBADuB,GAEvB,sBAPN,EAFe,CAWf;;AACAR,MAAAA,CAAC,CAACiB,MAAF,CAAS,CAAC,OAAD,EAAU,OAAV,CAAT,EAA6B;AACzBC,QAAAA,KAAK,EAAE,SADkB;AAEzBC,QAAAA,SAAS,EAAE,SAFc;AAGzBC,QAAAA,WAAW,EAAE,GAHY;AAIzBC,QAAAA,MAAM,EAAE;AAJiB,OAA7B,EAKGd,KALH,CAKS,KAAKL,GALd,EAKmBW,SALnB,CAK6B,KAAKL,WAAL,KAAqB,IAArB,GACvB,uBADuB,GAEvB,uBAPN;AAQH;AAED;;;;;;mCAGe;AACX,UAAMe,MAAM,GAAGvB,CAAC,CAACwB,OAAF,CAAUC,MAAV,CAAiB;AAC5BC,QAAAA,KAAK,EAAE,eAASxB,GAAT,EAAc;AACjB,cAAMyB,GAAG,GAAG3B,CAAC,CAAC4B,OAAF,CAAUC,MAAV,CAAiB,KAAjB,EAAwB,YAAxB,CAAZ;AACA,cAAMO,YAAY,GAAG;AACjBC,YAAAA,EAAE,EAAE;AACAoI,cAAAA,QAAQ,EAAE,eADV;AAEAE,cAAAA,KAAK,EAAE,WAFP;AAGAC,cAAAA,OAAO,EAAE,YAHT;AAIAC,cAAAA,OAAO,EAAE;AAJT,aADa;AAOjBlI,YAAAA,EAAE,EAAE;AACA8H,cAAAA,QAAQ,EAAE,gBADV;AAEAE,cAAAA,KAAK,EAAE,gBAFP;AAGAC,cAAAA,OAAO,EAAE,kBAHT;AAIAC,cAAAA,OAAO,EAAE;AAJT;AAPa,WAArB;AAeA,cAAMjI,CAAC,GAAGR,YAAY,CAAC3B,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAArC,CAAZ,IAA0D0B,YAAY,CAACC,EAAjF;AAEAV,UAAAA,GAAG,CAACG,SAAJ,uCACUc,CAAC,CAAC6H,QADZ,gMAIgB7H,CAAC,CAAC+H,KAJlB,8NAQgB/H,CAAC,CAACgI,OARlB,8NAYgBhI,CAAC,CAACiI,OAZlB;AAeA,iBAAOlJ,GAAP;AACH;AApC2B,OAAjB,CAAf;AAuCA,UAAIJ,MAAJ,CAAW;AAAEQ,QAAAA,QAAQ,EAAE;AAAZ,OAAX,EAAwCxB,KAAxC,CAA8C,KAAKL,GAAnD;AACH;AAED;;;;;;mCAGe;AACX,UAAMH,UAAU,GAAGd,QAAQ,CAACG,cAAT,CAAwB,YAAxB,CAAnB;AACA,UAAI,CAACW,UAAL,EAAiB;AAEjB,UAAMqC,YAAY,GAAG;AACjBC,QAAAA,EAAE,EAAE;AACAC,UAAAA,UAAU,EAAE,oBADZ;AAEAC,UAAAA,YAAY,EAAE,0EAFd;AAGAC,UAAAA,WAAW,EAAE,SAHb;AAIAC,UAAAA,aAAa,EAAE,UAJf;AAKAC,UAAAA,WAAW,EAAE,4CALb;AAMAoI,UAAAA,QAAQ,EAAE,gBANV;AAOAC,UAAAA,UAAU,EAAE,iBAPZ;AAQAC,UAAAA,OAAO,EAAE;AART,SADa;AAWjBrI,QAAAA,EAAE,EAAE;AACAL,UAAAA,UAAU,EAAE,oBADZ;AAEAC,UAAAA,YAAY,EAAE,4FAFd;AAGAC,UAAAA,WAAW,EAAE,cAHb;AAIAC,UAAAA,aAAa,EAAE,gBAJf;AAKAC,UAAAA,WAAW,EAAE,iCALb;AAMAoI,UAAAA,QAAQ,EAAE,iBANV;AAOAC,UAAAA,UAAU,EAAE,mBAPZ;AAQAC,UAAAA,OAAO,EAAE;AART;AAXa,OAArB;AAuBA,UAAMpI,CAAC,GAAGR,YAAY,CAAC,KAAK5B,WAAN,CAAZ,IAAkC4B,YAAY,CAACC,EAAzD;AAEAtC,MAAAA,UAAU,CAAC+B,SAAX,yNAKcc,CAAC,CAACN,UALhB,uCAMaM,CAAC,CAACL,YANf,wWAa8BK,CAAC,CAACJ,WAbhC,kHAcsFI,CAAC,CAACkI,QAdxF,4kBAwBgClI,CAAC,CAACoI,OAxBlC,2ZAiC8BpI,CAAC,CAACH,aAjChC,kHAkCsFG,CAAC,CAACmI,UAlCxF,4kBA4CgCnI,CAAC,CAACoI,OA5ClC,wTAmDyBpI,CAAC,CAACF,WAnD3B;AAyDH;AAED;;;;;;0CAGsB;AAAA;;AAClB,UAAM2B,WAAW,GAAGpF,QAAQ,CAACG,cAAT,CAAwB,aAAxB,CAApB;AACA,UAAI,CAACiF,WAAL,EAAkB;AAElBA,MAAAA,WAAW,CAACnF,gBAAZ,CAA6B,QAA7B,EAAuC,UAACoF,CAAD;AAAA,eAAO,KAAI,CAAC2G,gBAAL,CAAsB3G,CAAtB,CAAP;AAAA,OAAvC,EAJkB,CAMlB;;AACA,UAAMsB,YAAY,GAAG3G,QAAQ,CAACG,cAAT,CAAwB,WAAxB,CAArB;;AACA,UAAIwG,YAAJ,EAAkB;AACdA,QAAAA,YAAY,CAAC1G,gBAAb,CAA8B,OAA9B,EAAuC;AAAA,iBAAM,KAAI,CAACgM,SAAL,EAAN;AAAA,SAAvC;AACH,OAViB,CAYlB;;;AACA,WAAKC,uBAAL;AACH;AAED;;;;;;qCAGiB7G,C,EAAG;AAChBA,MAAAA,CAAC,CAACC,cAAF;;AAEA,UAAI,KAAK+E,aAAT,EAAwB;AACpB,aAAKvF,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GACM,oDADN,GAEM,wCAHV,EAII,SAJJ;AAMA;AACH,OAXe,CAahB;;;AACA,UAAI,CAAC,KAAK4K,YAAL,EAAL,EAA0B;AACtB;AACH,OAhBe,CAkBhB;;;AACA,WAAKC,cAAL,CAAoB,IAApB,EAnBgB,CAqBhB;;AACA,UAAM7G,QAAQ,GAAG,KAAK8G,WAAL,EAAjB,CAtBgB,CAwBhB;;AACA,UAAMnG,eAAe,GAAG,KAAKoG,qBAAL,CAA2B/G,QAA3B,CAAxB;AACA,UAAMiB,WAAW,GAAG,KAAK+F,iBAAL,CAAuBhH,QAAvB,EAAiCW,eAAjC,CAApB,CA1BgB,CA4BhB;;AACA,WAAKsG,YAAL,CAAkBhG,WAAlB,EAA+BjB,QAA/B;AACH;AAED;;;;;;mCAGe;AACX,UAAMC,QAAQ,GAAGxF,QAAQ,CAACG,cAAT,CAAwB,UAAxB,EAAoCgF,KAApC,CAA0CiB,IAA1C,EAAjB;AACA,UAAMV,WAAW,GAAG1F,QAAQ,CAACG,cAAT,CAAwB,aAAxB,EAAuCgF,KAAvC,CAA6CiB,IAA7C,EAApB;AACA,UAAML,cAAc,GAAG/F,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,EAA0CgF,KAA1C,CAAgDiB,IAAhD,EAAvB;AACA,UAAMvB,OAAO,GAAG7E,QAAQ,CAACG,cAAT,CAAwB,SAAxB,EAAmCgF,KAAnC,CAAyCiB,IAAzC,EAAhB;AACA,UAAMJ,aAAa,GAAGhG,QAAQ,CAACG,cAAT,CAAwB,eAAxB,EAAyC8F,OAA/D;AACA,UAAMJ,WAAW,GAAG7F,QAAQ,CAACG,cAAT,CAAwB,aAAxB,EAAuCgF,KAA3D,CANW,CAQX;;AACA,UAAI,CAACK,QAAL,EAAe;AACX,aAAKV,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GAA4B,6BAA5B,GAA4D,yBADhE,EAEI,OAFJ;AAIA,eAAO,KAAP;AACH;;AAED,UAAI,CAACmE,WAAL,EAAkB;AACd,aAAKZ,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GAA4B,gCAA5B,GAA+D,uBADnE,EAEI,OAFJ;AAIA,eAAO,KAAP;AACH;;AAED,UAAI,CAACsE,WAAD,IAAgBA,WAAW,KAAK,EAApC,EAAwC;AACpC,aAAKf,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GAA4B,8BAA5B,GAA6D,wBADjE,EAEI,OAFJ;AAIA,eAAO,KAAP;AACH;;AAED,UAAI,CAACwE,cAAL,EAAqB;AACjB,aAAKjB,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GAA4B,gCAA5B,GAA+D,0BADnE,EAEI,OAFJ;AAIA,eAAO,KAAP;AACH;;AAED,UAAI,CAACsD,OAAL,EAAc;AACV,aAAKC,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GAA4B,2BAA5B,GAA0D,oBAD9D,EAEI,OAFJ;AAIA,eAAO,KAAP;AACH;;AAED,UAAIsD,OAAO,CAACK,MAAR,GAAiB,EAArB,EAAyB;AACrB,aAAKJ,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GAA4B,8CAA5B,GAA6E,0CADjF,EAEI,OAFJ;AAIA,eAAO,KAAP;AACH;;AAED,UAAI,CAACyE,aAAL,EAAoB;AAChB,aAAKlB,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GACM,kCADN,GAEM,kCAHV,EAII,OAJJ;AAMA,eAAO,KAAP;AACH;;AAED,aAAO,IAAP;AACH;AAED;;;;;;kCAGc;AACV,aAAO;AACHiE,QAAAA,QAAQ,EAAExF,QAAQ,CAACG,cAAT,CAAwB,UAAxB,EAAoCgF,KAApC,CAA0CiB,IAA1C,EADP;AAEHX,QAAAA,WAAW,EAAEzF,QAAQ,CAACG,cAAT,CAAwB,aAAxB,EAAuCgF,KAFjD;AAGHO,QAAAA,WAAW,EAAE1F,QAAQ,CAACG,cAAT,CAAwB,aAAxB,EAAuCgF,KAAvC,CAA6CiB,IAA7C,EAHV;AAIHT,QAAAA,KAAK,EAAE3F,QAAQ,CAACG,cAAT,CAAwB,OAAxB,EAAiCgF,KAAjC,CAAuCiB,IAAvC,EAJJ;AAKHR,QAAAA,gBAAgB,EAAE5F,QAAQ,CAACG,cAAT,CAAwB,kBAAxB,EAA4CgF,KAL3D;AAMHU,QAAAA,WAAW,EAAE7F,QAAQ,CAACG,cAAT,CAAwB,aAAxB,EAAuCgF,KANjD;AAOHsH,QAAAA,eAAe,EAAEzM,QAAQ,CAACG,cAAT,CAAwB,aAAxB,EAAuCuM,eAAvC,CAAuD,CAAvD,EAA0DC,IAPxE;AAQH7G,QAAAA,OAAO,EAAE9F,QAAQ,CAACG,cAAT,CAAwB,SAAxB,EAAmCgF,KARzC;AASHY,QAAAA,cAAc,EAAE/F,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,EAA0CgF,KAA1C,CAAgDiB,IAAhD,EATb;AAUHvB,QAAAA,OAAO,EAAE7E,QAAQ,CAACG,cAAT,CAAwB,SAAxB,EAAmCgF,KAAnC,CAAyCiB,IAAzC,EAVN;AAWHJ,QAAAA,aAAa,EAAEhG,QAAQ,CAACG,cAAT,CAAwB,eAAxB,EAAyC8F,OAXrD;AAYHsB,QAAAA,KAAK,EAAE,KAAKA,KAZT;AAaHqF,QAAAA,SAAS,EAAE,IAAIvM,IAAJ,GAAW8F,cAAX;AAbR,OAAP;AAeH;AAED;;;;;;0CAGsBZ,Q,EAAU;AAC5B,UAAMpC,YAAY,GAAG;AACjBC,QAAAA,EAAE,EAAE;AACAyJ,UAAAA,KAAK,EAAE,8BADP;AAEAC,UAAAA,YAAY,EAAE,uBAFd;AAGAxE,UAAAA,IAAI,EAAE,OAHN;AAIAgD,UAAAA,KAAK,EAAE,QAJP;AAKA3F,UAAAA,KAAK,EAAE,mBALP;AAMAC,UAAAA,gBAAgB,EAAE,uBANlB;AAOAmH,UAAAA,WAAW,EAAE,oBAPb;AAQAlH,UAAAA,WAAW,EAAE,YARb;AASAC,UAAAA,OAAO,EAAE,gBATT;AAUAkH,UAAAA,OAAO,EAAE,SAVT;AAWAnI,UAAAA,OAAO,EAAE,aAXT;AAYAoI,UAAAA,SAAS,EAAE,iBAZX;AAaAC,UAAAA,WAAW,EAAE,UAbb;AAcAC,UAAAA,GAAG,EAAE,UAdL;AAeAC,UAAAA,MAAM,EAAE,MAfR;AAgBAC,UAAAA,MAAM,EAAE,MAhBR;AAiBAC,UAAAA,SAAS,EAAE;AAjBX,SADa;AAoBjB5J,QAAAA,EAAE,EAAE;AACAmJ,UAAAA,KAAK,EAAE,iDADP;AAEAC,UAAAA,YAAY,EAAE,0BAFd;AAGAxE,UAAAA,IAAI,EAAE,MAHN;AAIAgD,UAAAA,KAAK,EAAE,OAJP;AAKA3F,UAAAA,KAAK,EAAE,OALP;AAMAC,UAAAA,gBAAgB,EAAE,mBANlB;AAOAmH,UAAAA,WAAW,EAAE,yBAPb;AAQAlH,UAAAA,WAAW,EAAE,cARb;AASAC,UAAAA,OAAO,EAAE,eATT;AAUAkH,UAAAA,OAAO,EAAE,SAVT;AAWAnI,UAAAA,OAAO,EAAE,aAXT;AAYAoI,UAAAA,SAAS,EAAE,kBAZX;AAaAC,UAAAA,WAAW,EAAE,cAbb;AAcAC,UAAAA,GAAG,EAAE,YAdL;AAeAC,UAAAA,MAAM,EAAE,QAfR;AAgBAC,UAAAA,MAAM,EAAE,QAhBR;AAiBAC,UAAAA,SAAS,EAAE;AAjBX;AApBa,OAArB;AAyCA,UAAM3J,CAAC,GAAGR,YAAY,CAAC,KAAK5B,WAAN,CAAZ,IAAkC4B,YAAY,CAACC,EAAzD;AACA,UAAMmK,UAAU,GAAG;AACfH,QAAAA,MAAM,EAAEzJ,CAAC,CAACyJ,MADK;AAEfC,QAAAA,MAAM,EAAE1J,CAAC,CAAC0J,MAFK;AAGfC,QAAAA,SAAS,EAAE3J,CAAC,CAAC2J;AAHE,OAAnB;AAMA,UAAME,gBAAgB,GAAG;AACrBjC,QAAAA,QAAQ,EAAE,KAAKhK,WAAL,KAAqB,IAArB,GAA4B,UAA5B,GAAyC,QAD9B;AAErB+J,QAAAA,KAAK,EAAE,KAAK/J,WAAL,KAAqB,IAArB,GAA4B,YAA5B,GAA2C,eAF7B;AAGrBoE,QAAAA,KAAK,EAAE,KAAKpE,WAAL,KAAqB,IAArB,GAA4B,OAA5B,GAAsC,eAHxB;AAIrB4L,QAAAA,GAAG,EAAExJ,CAAC,CAACwJ;AAJc,OAAzB;AAOA,aAAO,YACbxJ,CAAC,CAACkJ,KADW,kBAGZlJ,CAAC,CAACmJ,YAHU,uBAIXnJ,CAAC,CAAC2E,IAJS,eAIA/C,QAAQ,CAACC,QAJT,sBAKX7B,CAAC,CAAC2H,KALS,eAKC/F,QAAQ,CAACE,WALV,cAKyBF,QAAQ,CAACG,WALlC,sBAMX/B,CAAC,CAACgC,KANS,eAMCJ,QAAQ,CAACI,KAAT,IAAkBhC,CAAC,CAACuJ,WANrB,sBAOXvJ,CAAC,CAACiC,gBAPS,eAOY4H,gBAAgB,CAACjI,QAAQ,CAACK,gBAAV,CAAhB,IAA+CL,QAAQ,CAACK,gBAPpE,kBASZjC,CAAC,CAACoJ,WATU,uBAUXpJ,CAAC,CAACkC,WAVS,eAUON,QAAQ,CAACkH,eAVhB,sBAWX9I,CAAC,CAACmC,OAXS,eAWGyH,UAAU,CAAChI,QAAQ,CAACO,OAAV,CAAV,IAAgCP,QAAQ,CAACO,OAX5C,sBAYXnC,CAAC,CAACqJ,OAZS,eAYGzH,QAAQ,CAACQ,cAZZ,kBAcZpC,CAAC,CAACkB,OAdU,gBAebU,QAAQ,CAACV,OAfI,iBAiBbU,QAAQ,CAACgC,KAAT,CAAerC,MAAf,GAAwB,CAAxB,4BAAoCK,QAAQ,CAACgC,KAAT,CAAerC,MAAnD,yBAA+E,EAjBlE,kBAmBZvB,CAAC,CAACsJ,SAnBU,eAmBI1H,QAAQ,CAACqH,SAnBb,gBAoBLxG,IApBK,EAAP;AAqBH;AAED;;;;;;sCAGkBb,Q,EAAUV,O,EAAS;AACjC,UAAM0B,cAAc,GAAGhB,QAAQ,CAACE,WAAT,KAAyB,MAAzB,GAAkC,aAAlC,GAAkD,aAAzE;AACA,UAAMY,cAAc,GAAGC,kBAAkB,CAACzB,OAAD,CAAzC;AACA,qCAAwB0B,cAAxB,mBAA+CF,cAA/C;AACH;AAED;;;;;;iCAGaoH,G,EAAKlI,Q,EAAU;AAAA;;AACxB;AACA,UAAMmI,SAAS,GAAG1J,MAAM,CAACyC,IAAP,CAAYgH,GAAZ,EAAiB,QAAjB,CAAlB;;AAEA,UAAIC,SAAJ,EAAe;AACX,aAAKC,kBAAL;AACA,aAAKtD,aAAL,GAAqB,IAArB,CAFW,CAIX;;AACA9J,QAAAA,UAAU,CAAC,YAAM;AACb,UAAA,MAAI,CAAC0L,SAAL;;AACA,UAAA,MAAI,CAAC5B,aAAL,GAAqB,KAArB;AACH,SAHS,EAGP,IAHO,CAAV,CALW,CAUX;;AACA,aAAKuD,mBAAL,CAAyBrI,QAAzB;AACH,OAZD,MAYO;AACH,aAAKT,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GACM,uCADN,GAEM,6CAHV,EAII,OAJJ;AAMA,aAAK6K,cAAL,CAAoB,KAApB;AACH;AACJ;AAED;;;;;;yCAGqB;AACjB,UAAMyB,cAAc,GAAG7N,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,CAAvB;AACA,UAAMmD,YAAY,GAAGtD,QAAQ,CAACG,cAAT,CAAwB,cAAxB,CAArB;AAEA,UAAI0N,cAAJ,EAAoBA,cAAc,CAAClN,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;AACpB,UAAI0C,YAAJ,EAAkBA,YAAY,CAAC3C,KAAb,CAAmBC,OAAnB,GAA6B,MAA7B;AAElB,WAAKkE,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GACM,kDADN,GAEM,8CAHV,EAII,SAJJ;AAMH;AAED;;;;;;qCAGiBsD,O,EAAS;AACtB,UAAMgJ,cAAc,GAAG7N,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,CAAvB;AACA,UAAMmD,YAAY,GAAGtD,QAAQ,CAACG,cAAT,CAAwB,cAAxB,CAArB;AACA,UAAM2N,SAAS,GAAG9N,QAAQ,CAACG,cAAT,CAAwB,WAAxB,CAAlB;AAEA,UAAI0N,cAAJ,EAAoBA,cAAc,CAAClN,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;AACpB,UAAI0C,YAAJ,EAAkBA,YAAY,CAAC3C,KAAb,CAAmBC,OAAnB,GAA6B,MAA7B;AAClB,UAAIkN,SAAJ,EAAeA,SAAS,CAAC1N,WAAV,GAAwByE,OAAxB;AAEf,WAAKC,SAAL,CAAeD,OAAf,EAAwB,OAAxB;AACH;AAED;;;;;;mCAGekJ,S,EAAW;AACtB,UAAMC,SAAS,GAAGhO,QAAQ,CAACG,cAAT,CAAwB,YAAxB,CAAlB;AACA,UAAM8N,MAAM,GAAGjO,QAAQ,CAACG,cAAT,CAAwB,YAAxB,CAAf;;AAEA,UAAI6N,SAAJ,EAAe;AACXA,QAAAA,SAAS,CAACE,QAAV,GAAqBH,SAArB;AACH;;AAED,UAAIE,MAAJ,EAAY;AACRA,QAAAA,MAAM,CAACtN,KAAP,CAAaC,OAAb,GAAuBmN,SAAS,GAAG,OAAH,GAAa,MAA7C;AACH;AACJ;AAED;;;;;;gCAGY;AACR,UAAInH,OAAO,CACP,KAAKrF,WAAL,KAAqB,IAArB,GACM,0CADN,GAEM,8BAHC,CAAX,EAIG;AACC,YAAM6D,WAAW,GAAGpF,QAAQ,CAACG,cAAT,CAAwB,aAAxB,CAApB;;AACA,YAAIiF,WAAJ,EAAiB;AACbA,UAAAA,WAAW,CAACsB,KAAZ;AACA,eAAKa,KAAL,GAAa,EAAb;AACA,eAAKC,cAAL,GAHa,CAKb;;AACA,cAAMvC,SAAS,GAAGjF,QAAQ,CAACQ,aAAT,CAAuB,aAAvB,CAAlB;;AACA,cAAIyE,SAAJ,EAAe;AACXA,YAAAA,SAAS,CAAC7E,WAAV,oBAAkC,KAAKmB,WAAL,KAAqB,IAArB,GAA4B,YAA5B,GAA2C,KAA7E;AACA0D,YAAAA,SAAS,CAACtE,KAAV,CAAgBsB,KAAhB,GAAwB,MAAxB;AACH,WAVY,CAYb;;;AACA,cAAM4L,cAAc,GAAG7N,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,CAAvB;AACA,cAAMmD,YAAY,GAAGtD,QAAQ,CAACG,cAAT,CAAwB,cAAxB,CAArB;AACA,cAAI0N,cAAJ,EAAoBA,cAAc,CAAClN,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;AACpB,cAAI0C,YAAJ,EAAkBA,YAAY,CAAC3C,KAAb,CAAmBC,OAAnB,GAA6B,MAA7B;AAElB,eAAKkE,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,GAA4B,cAA5B,GAA6C,gBADjD,EAEI,MAFJ;AAIH;AACJ;AACJ;AAED;;;;;;8CAG0B;AAAA;;AACtB,UAAM4M,MAAM,GAAGnO,QAAQ,CAACoE,gBAAT,CAA0B,gEAA1B,CAAf;AAEA+J,MAAAA,MAAM,CAAC9J,OAAP,CAAe,UAAA+J,KAAK,EAAI;AACpBA,QAAAA,KAAK,CAACnO,gBAAN,CAAuB,MAAvB,EAA+B;AAAA,iBAAM,MAAI,CAACoO,aAAL,CAAmBD,KAAnB,CAAN;AAAA,SAA/B;AACAA,QAAAA,KAAK,CAACnO,gBAAN,CAAuB,OAAvB,EAAgC;AAAA,iBAAM,MAAI,CAACqO,eAAL,CAAqBF,KAArB,CAAN;AAAA,SAAhC;AACH,OAHD;AAIH;AAED;;;;;;kCAGcG,K,EAAO;AACjB,UAAMpJ,KAAK,GAAGoJ,KAAK,CAACpJ,KAAN,CAAYiB,IAAZ,EAAd;AACA,UAAMoI,SAAS,GAAGD,KAAK,CAACE,EAAN,IAAYF,KAAK,CAACjG,IAApC;;AAEA,cAAQkG,SAAR;AACI,aAAK,UAAL;AACI,cAAIrJ,KAAK,CAACD,MAAN,GAAe,CAAnB,EAAsB;AAClB,iBAAKwJ,cAAL,CAAoBH,KAApB,EAA2B,KAAKhN,WAAL,KAAqB,IAArB,GACrB,oCADqB,GAErB,mCAFN;AAGA,mBAAO,KAAP;AACH;;AACD;;AAEJ,aAAK,aAAL;AACI,cAAMoN,UAAU,GAAG,eAAnB;;AACA,cAAI,CAACA,UAAU,CAACC,IAAX,CAAgBzJ,KAAhB,CAAL,EAA6B;AACzB,iBAAKuJ,cAAL,CAAoBH,KAApB,EAA2B,KAAKhN,WAAL,KAAqB,IAArB,GACrB,mCADqB,GAErB,0BAFN;AAGA,mBAAO,KAAP;AACH;;AACD;;AAEJ,aAAK,OAAL;AACI,cAAI4D,KAAK,IAAI,CAAC,KAAK0J,YAAL,CAAkB1J,KAAlB,CAAd,EAAwC;AACpC,iBAAKuJ,cAAL,CAAoBH,KAApB,EAA2B,KAAKhN,WAAL,KAAqB,IAArB,GACrB,oCADqB,GAErB,+BAFN;AAGA,mBAAO,KAAP;AACH;;AACD;;AAEJ,aAAK,SAAL;AACI,cAAI4D,KAAK,CAACD,MAAN,GAAe,EAAnB,EAAuB;AACnB,iBAAKwJ,cAAL,CAAoBH,KAApB,EAA2B,KAAKhN,WAAL,KAAqB,IAArB,GACrB,8CADqB,GAErB,0CAFN;AAGA,mBAAO,KAAP;AACH;;AACD;AApCR;;AAuCA,aAAO,IAAP;AACH;AAED;;;;;;mCAGegN,K,EAAO1J,O,EAAS;AAC3B,WAAKyJ,eAAL,CAAqBC,KAArB;AAEA,UAAMO,QAAQ,GAAG9O,QAAQ,CAAC2H,aAAT,CAAuB,KAAvB,CAAjB;AACAmH,MAAAA,QAAQ,CAAClH,SAAT,GAAqB,aAArB;AACAkH,MAAAA,QAAQ,CAAC1O,WAAT,GAAuByE,OAAvB;AACAiK,MAAAA,QAAQ,CAACnO,KAAT,CAAesB,KAAf,GAAuB,cAAvB;AACA6M,MAAAA,QAAQ,CAACnO,KAAT,CAAeoO,QAAf,GAA0B,SAA1B;AACAD,MAAAA,QAAQ,CAACnO,KAAT,CAAeqO,SAAf,GAA2B,KAA3B;AAEAT,MAAAA,KAAK,CAAC1E,UAAN,CAAiBhC,WAAjB,CAA6BiH,QAA7B;AACAP,MAAAA,KAAK,CAAC5N,KAAN,CAAYsO,WAAZ,GAA0B,cAA1B;AACH;AAED;;;;;;oCAGgBV,K,EAAO;AACnB,UAAMO,QAAQ,GAAGP,KAAK,CAAC1E,UAAN,CAAiBrJ,aAAjB,CAA+B,cAA/B,CAAjB;;AACA,UAAIsO,QAAJ,EAAc;AACVA,QAAAA,QAAQ,CAAChL,MAAT;AACH;;AACDyK,MAAAA,KAAK,CAAC5N,KAAN,CAAYsO,WAAZ,GAA0B,EAA1B;AACH;AAED;;;;;;iCAGatJ,K,EAAO;AAChB,UAAMuJ,UAAU,GAAG,4BAAnB;AACA,aAAOA,UAAU,CAACN,IAAX,CAAgBjJ,KAAhB,CAAP;AACH;AAED;;;;;;uCAGmB;AAAA;;AACf3F,MAAAA,QAAQ,CAACoE,gBAAT,CAA0B,WAA1B,EAAuCC,OAAvC,CAA+C,UAAAC,MAAM,EAAI;AACrDA,QAAAA,MAAM,CAACrE,gBAAP,CAAwB,OAAxB,EAAiC,UAACoF,CAAD,EAAO;AACpCA,UAAAA,CAAC,CAACC,cAAF;AACA,cAAMf,UAAU,GAAGD,MAAM,CAACE,YAAP,CAAoB,WAApB,KAAoCF,MAAM,CAACE,YAAP,CAAoB,aAApB,CAAvD;;AACA,cAAID,UAAJ,EAAgB;AACZ,YAAA,MAAI,CAAC4K,eAAL,CAAqB5K,UAArB;AACH;AACJ,SAND;AAOH,OARD;AASH;AAED;;;;;;oCAGgBoI,I,EAAM;AAAA;;AAClBlI,MAAAA,SAAS,CAACC,SAAV,CAAoBC,SAApB,CAA8BgI,IAA9B,EAAoC/H,IAApC,CAAyC,YAAM;AAC3C,QAAA,MAAI,CAACE,SAAL,CACI,MAAI,CAACvD,WAAL,KAAqB,IAArB,GAA4B,sBAA5B,GAAqD,uBADzD,EAEI,SAFJ;AAIH,OALD,WAKS,UAAAwD,GAAG,EAAI;AACZhC,QAAAA,OAAO,CAACE,KAAR,CAAc,kBAAd,EAAkC8B,GAAlC;;AACA,QAAA,MAAI,CAACD,SAAL,CACI,MAAI,CAACvD,WAAL,KAAqB,IAArB,GAA4B,qBAA5B,GAAoD,iBADxD,EAEI,OAFJ;AAIH,OAXD;AAYH;AAED;;;;;;sCAGkB;AAAA;;AACd,UAAMsF,UAAU,GAAG7G,QAAQ,CAACG,cAAT,CAAwB,YAAxB,CAAnB;AACA,UAAM2G,cAAc,GAAG9G,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,CAAvB;AACA,UAAM4G,QAAQ,GAAG/G,QAAQ,CAACG,cAAT,CAAwB,UAAxB,CAAjB;AAEA,UAAI,CAAC0G,UAAD,IAAe,CAACC,cAApB,EAAoC,OALtB,CAOd;;AACAA,MAAAA,cAAc,CAAC7G,gBAAf,CAAgC,OAAhC,EAAyC;AAAA,eAAM4G,UAAU,CAAC4C,KAAX,EAAN;AAAA,OAAzC,EARc,CAUd;;AACA5C,MAAAA,UAAU,CAAC5G,gBAAX,CAA4B,QAA5B,EAAsC;AAAA,eAAM,MAAI,CAACmP,gBAAL,CAAsBvI,UAAU,CAACU,KAAjC,CAAN;AAAA,OAAtC,EAXc,CAad;;AACA,WAAK8H,gBAAL,CAAsBvI,cAAtB,EAAsCD,UAAtC;AACH;AAED;;;;;;qCAGiBU,K,EAAO;AACpB,UAAM+H,OAAO,GAAG,KAAK,IAAL,GAAY,IAA5B,CADoB,CACc;;AAClC,UAAMC,YAAY,GAAG,CAAC,YAAD,EAAe,WAAf,EAA4B,WAA5B,EAAyC,iBAAzC,EACD,oBADC,EACqB,yEADrB,CAArB;AAFoB;AAAA;AAAA;;AAAA;AAKpB,6BAAiBhI,KAAjB,8HAAwB;AAAA,cAAfS,IAAe;;AACpB;AACA,cAAIA,IAAI,CAACU,IAAL,GAAY4G,OAAhB,EAAyB;AACrB,iBAAKxK,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,oBACeyG,IAAI,CAACM,IADpB,6EAEgBN,IAAI,CAACM,IAFrB,6KADJ,EAII,OAJJ;AAMA;AACH,WAVmB,CAYpB;;;AACA,cAAI,CAACiH,YAAY,CAAClH,QAAb,CAAsBL,IAAI,CAACG,IAA3B,CAAD,IACA,CAACH,IAAI,CAACM,IAAL,CAAUkH,KAAV,CAAgB,iCAAhB,CADL,EACyD;AACrD,iBAAK1K,SAAL,CACI,KAAKvD,WAAL,KAAqB,IAArB,2CACsCyG,IAAI,CAACM,IAD3C,uIAEiCN,IAAI,CAACM,IAFtC,OADJ,EAII,OAJJ;AAMA;AACH,WAtBmB,CAwBpB;;;AACA,eAAKf,KAAL,CAAWkI,IAAX,CAAgBzH,IAAhB;AACH;AA/BmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiCpB,WAAKR,cAAL;AACH;AAED;;;;;;qCAGiBkI,Q,EAAUC,S,EAAW;AAAA;;AAClC,OAAC,WAAD,EAAc,UAAd,EAA0B,WAA1B,EAAuC,MAAvC,EAA+CtL,OAA/C,CAAuD,UAAAqF,SAAS,EAAI;AAChEgG,QAAAA,QAAQ,CAACzP,gBAAT,CAA0ByJ,SAA1B,EAAqC,MAAI,CAAC1C,eAA1C,EAA2D,KAA3D;AACH,OAFD;AAIA,OAAC,WAAD,EAAc,UAAd,EAA0B3C,OAA1B,CAAkC,UAAAqF,SAAS,EAAI;AAC3CgG,QAAAA,QAAQ,CAACzP,gBAAT,CAA0ByJ,SAA1B,EAAqC;AAAA,iBAAM,MAAI,CAACxC,SAAL,CAAewI,QAAf,CAAN;AAAA,SAArC,EAAqE,KAArE;AACH,OAFD;AAIA,OAAC,WAAD,EAAc,MAAd,EAAsBrL,OAAtB,CAA8B,UAAAqF,SAAS,EAAI;AACvCgG,QAAAA,QAAQ,CAACzP,gBAAT,CAA0ByJ,SAA1B,EAAqC;AAAA,iBAAM,MAAI,CAACvC,WAAL,CAAiBuI,QAAjB,CAAN;AAAA,SAArC,EAAuE,KAAvE;AACH,OAFD;AAIAA,MAAAA,QAAQ,CAACzP,gBAAT,CAA0B,MAA1B,EAAkC,UAACoF,CAAD;AAAA,eAAO,MAAI,CAAC+B,UAAL,CAAgB/B,CAAhB,EAAmBsK,SAAnB,CAAP;AAAA,OAAlC,EAAwE,KAAxE;AACH;AAED;;;;;;oCAGgBtK,C,EAAG;AACfA,MAAAA,CAAC,CAACC,cAAF;AACAD,MAAAA,CAAC,CAAC4B,eAAF;AACH;AAED;;;;;;8BAGU2I,O,EAAS;AACfA,MAAAA,OAAO,CAACnP,SAAR,CAAkBC,GAAlB,CAAsB,WAAtB;AACH;AAED;;;;;;gCAGYkP,O,EAAS;AACjBA,MAAAA,OAAO,CAACnP,SAAR,CAAkBqD,MAAlB,CAAyB,WAAzB;AACH;AAED;;;;;;+BAGWuB,C,EAAGsK,S,EAAW;AACrB,UAAMtI,EAAE,GAAGhC,CAAC,CAACiC,YAAb;AACA,UAAMC,KAAK,GAAGF,EAAE,CAACE,KAAjB,CAFqB,CAIrB;;AACA,UAAMD,YAAY,GAAG,IAAIyB,YAAJ,EAArB;AALqB;AAAA;AAAA;;AAAA;AAMrB,8BAAiBxB,KAAjB,mIAAwB;AAAA,cAAfS,IAAe;AACpBV,UAAAA,YAAY,CAAC0B,KAAb,CAAmBtI,GAAnB,CAAuBsH,IAAvB;AACH;AARoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AASrB2H,MAAAA,SAAS,CAACpI,KAAV,GAAkBD,YAAY,CAACC,KAA/B,CATqB,CAWrB;;AACA,UAAMsI,KAAK,GAAG,IAAIC,KAAJ,CAAU,QAAV,EAAoB;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAApB,CAAd;AACAJ,MAAAA,SAAS,CAACK,aAAV,CAAwBH,KAAxB;AACH;AAED;;;;;;qCAGiB;AAAA;;AACb,UAAM9I,QAAQ,GAAG/G,QAAQ,CAACG,cAAT,CAAwB,UAAxB,CAAjB;AACA,UAAI,CAAC4G,QAAL,EAAe;AAEfA,MAAAA,QAAQ,CAAClE,SAAT,GAAqB,EAArB;;AAEA,UAAI,KAAK0E,KAAL,CAAWrC,MAAX,KAAsB,CAA1B,EAA6B;AACzB;AACH,OARY,CAUb;;;AACA,UAAMwC,MAAM,GAAG1H,QAAQ,CAAC2H,aAAT,CAAuB,KAAvB,CAAf;AACAD,MAAAA,MAAM,CAACE,SAAP,GAAmB,kBAAnB;AACAF,MAAAA,MAAM,CAAC7E,SAAP,iCACY,KAAKtB,WAAL,KAAqB,IAArB,aACC,KAAKgG,KAAL,CAAWrC,MADZ,qFAEW,KAAKqC,KAAL,CAAWrC,MAFtB,sCADZ,sGAKU,KAAK3D,WAAL,KAAqB,IAArB,GAA4B,WAA5B,GAA0C,UALpD;AAQAwF,MAAAA,QAAQ,CAACc,WAAT,CAAqBH,MAArB,EArBa,CAuBb;;AACAA,MAAAA,MAAM,CAAClH,aAAP,CAAqB,kBAArB,EAAyCP,gBAAzC,CAA0D,OAA1D,EAAmE,YAAM;AACrE,QAAA,MAAI,CAACsH,KAAL,GAAa,EAAb;AACAvH,QAAAA,QAAQ,CAACG,cAAT,CAAwB,YAAxB,EAAsCgF,KAAtC,GAA8C,EAA9C;;AACA,QAAA,MAAI,CAACqC,cAAL;AACH,OAJD,EAxBa,CA8Bb;;AACA,WAAKD,KAAL,CAAWlD,OAAX,CAAmB,UAAC2D,IAAD,EAAOY,KAAP,EAAiB;AAChC,YAAMX,QAAQ,GAAG,MAAI,CAACgI,cAAL,CAAoBjI,IAApB,EAA0BY,KAA1B,CAAjB;;AACA7B,QAAAA,QAAQ,CAACc,WAAT,CAAqBI,QAArB;AACH,OAHD;AAIH;AAED;;;;;;mCAGeD,I,EAAMY,K,EAAO;AAAA;;AACxB,UAAMX,QAAQ,GAAGjI,QAAQ,CAAC2H,aAAT,CAAuB,KAAvB,CAAjB;AACAM,MAAAA,QAAQ,CAACL,SAAT,GAAqB,WAArB,CAFwB,CAIxB;;AACA,UAAMM,QAAQ,GAAG,KAAKgI,WAAL,CAAiBlI,IAAjB,CAAjB,CALwB,CAOxB;;AACA,UAAMQ,QAAQ,GAAG,KAAKC,cAAL,CAAoBT,IAAI,CAACU,IAAzB,CAAjB;AAEAT,MAAAA,QAAQ,CAACpF,SAAT,qFAEwBqF,QAFxB,2FAIsCF,IAAI,CAACM,IAJ3C,oEAKsCE,QALtC,6IAQgEI,KARhE,0FAVwB,CAuBxB;;AACAX,MAAAA,QAAQ,CAACzH,aAAT,CAAuB,kBAAvB,EAA2CP,gBAA3C,CAA4D,OAA5D,EAAqE,YAAM;AACvE,QAAA,MAAI,CAACsH,KAAL,CAAW4I,MAAX,CAAkBvH,KAAlB,EAAyB,CAAzB;;AACA,QAAA,MAAI,CAACpB,cAAL;AACH,OAHD;AAKA,aAAOS,QAAP;AACH;AAED;;;;;;gCAGYD,I,EAAM;AACd,UAAIA,IAAI,CAACG,IAAL,CAAUC,UAAV,CAAqB,QAArB,CAAJ,EAAoC,OAAO,eAAP;AACpC,UAAIJ,IAAI,CAACG,IAAL,KAAc,iBAAlB,EAAqC,OAAO,aAAP;AACrC,UAAIH,IAAI,CAACG,IAAL,CAAUE,QAAV,CAAmB,MAAnB,KAA8BL,IAAI,CAACM,IAAL,CAAUkH,KAAV,CAAgB,gBAAhB,CAAlC,EAAqE,OAAO,cAAP;AACrE,aAAO,SAAP;AACH;AAED;;;;;;mCAGevG,K,EAAO;AAClB,UAAIA,KAAK,KAAK,CAAd,EAAiB,OAAO,SAAP;AACjB,UAAMC,CAAC,GAAG,IAAV;AACA,UAAMC,KAAK,GAAG,KAAK5H,WAAL,KAAqB,IAArB,GACR,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,EAAsB,IAAtB,CADQ,GAER,CAAC,MAAD,EAAS,UAAT,EAAqB,UAArB,EAAiC,UAAjC,CAFN;AAGA,UAAMwG,CAAC,GAAGqB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACpG,GAAL,CAASiG,KAAT,IAAkBG,IAAI,CAACpG,GAAL,CAASkG,CAAT,CAA7B,CAAV;AACA,aAAOI,UAAU,CAAC,CAACL,KAAK,GAAGG,IAAI,CAACG,GAAL,CAASL,CAAT,EAAYnB,CAAZ,CAAT,EAAyByB,OAAzB,CAAiC,CAAjC,CAAD,CAAV,GAAkD,GAAlD,GAAwDL,KAAK,CAACpB,CAAD,CAApE;AACH;AAED;;;;;;uCAGmB;AACf,UAAMnE,MAAM,GAAG5D,QAAQ,CAACQ,aAAT,CAAuB,uBAAvB,CAAf;AACA,UAAMqD,WAAW,GAAG7D,QAAQ,CAACQ,aAAT,CAAuB,eAAvB,CAApB;AAEA,UAAI,CAACoD,MAAD,IAAW,CAACC,WAAhB,EAA6B,OAJd,CAMf;;AACAtD,MAAAA,UAAU,CAAC,YAAM;AACbqD,QAAAA,MAAM,CAACnD,SAAP,CAAiBC,GAAjB,CAAqB,QAArB;AACH,OAFS,EAEP,IAFO,CAAV,CAPe,CAWf;;AACAmD,MAAAA,WAAW,CAAC5D,gBAAZ,CAA6B,OAA7B,EAAsC,YAAM;AACxC2D,QAAAA,MAAM,CAACnD,SAAP,CAAiBqD,MAAjB,CAAwB,QAAxB;AACH,OAFD,EAZe,CAgBf;;AACA,WAAKsM,yBAAL,CAA+BxM,MAA/B;AACH;AAED;;;;;;8CAG0BA,M,EAAQ;AAC9B,UAAIG,aAAa,GAAG,CAApB;AAEAC,MAAAA,MAAM,CAAC/D,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;AACpC,YAAMgE,SAAS,GAAGD,MAAM,CAACE,WAAP,IAAsBlE,QAAQ,CAACmE,eAAT,CAAyBF,SAAjE;;AAEA,YAAIA,SAAS,GAAGF,aAAhB,EAA+B;AAC3B;AACAH,UAAAA,MAAM,CAACnD,SAAP,CAAiBqD,MAAjB,CAAwB,QAAxB;AACH,SAHD,MAGO,IAAIG,SAAS,GAAGF,aAAZ,IAA6BE,SAAS,GAAG,GAA7C,EAAkD;AACrD;AACAL,UAAAA,MAAM,CAACnD,SAAP,CAAiBC,GAAjB,CAAqB,QAArB;AACH;;AAEDqD,QAAAA,aAAa,GAAGE,SAAhB;AACH,OAZD;AAaH;AAED;;;;;;4CAGwB;AAAA;;AACpB,UAAMe,eAAe,GAAGhF,QAAQ,CAACG,cAAT,CAAwB,SAAxB,CAAxB;AACA,UAAM8E,SAAS,GAAGjF,QAAQ,CAACQ,aAAT,CAAuB,aAAvB,CAAlB;AAEA,UAAI,CAACwE,eAAD,IAAoB,CAACC,SAAzB,EAAoC;AAEpCD,MAAAA,eAAe,CAAC/E,gBAAhB,CAAiC,OAAjC,EAA0C,YAAM;AAC5C,YAAMiF,MAAM,GAAGF,eAAe,CAACG,KAAhB,CAAsBD,MAArC;AACA,YAAMmL,SAAS,GAAG,IAAlB;AAEApL,QAAAA,SAAS,CAAC7E,WAAV,aAA2B8E,MAA3B,cAAqCmL,SAArC,cAAkD,OAAI,CAAC9O,WAAL,KAAqB,IAArB,GAA4B,YAA5B,GAA2C,KAA7F,EAJ4C,CAM5C;;AACA,YAAI2D,MAAM,GAAGmL,SAAS,GAAG,IAAzB,EAA+B;AAC3BpL,UAAAA,SAAS,CAACtE,KAAV,CAAgBsB,KAAhB,GAAwB,cAAxB;AACH,SAFD,MAEO,IAAIiD,MAAM,GAAGmL,SAAS,GAAG,GAAzB,EAA8B;AACjCpL,UAAAA,SAAS,CAACtE,KAAV,CAAgBsB,KAAhB,GAAwB,gBAAxB;AACH,SAFM,MAEA;AACHgD,UAAAA,SAAS,CAACtE,KAAV,CAAgBsB,KAAhB,GAAwB,aAAxB;AACH,SAb2C,CAe5C;;;AACA,YAAIiD,MAAM,GAAGmL,SAAb,EAAwB;AACpBrL,UAAAA,eAAe,CAACG,KAAhB,GAAwBH,eAAe,CAACG,KAAhB,CAAsBmL,SAAtB,CAAgC,CAAhC,EAAmCD,SAAnC,CAAxB;AACApL,UAAAA,SAAS,CAAC7E,WAAV,aAA2BiQ,SAA3B,cAAwCA,SAAxC,cAAqD,OAAI,CAAC9O,WAAL,KAAqB,IAArB,GAA4B,YAA5B,GAA2C,KAAhG;AACH;AACJ,OApBD;AAqBH;AAED;;;;;;wCAGoB;AAChB,UAAMgP,QAAQ,GAAGvQ,QAAQ,CAACoE,gBAAT,CAA0B,WAA1B,CAAjB;AAEAmM,MAAAA,QAAQ,CAAClM,OAAT,CAAiB,UAAAmM,IAAI,EAAI;AACrB,YAAMC,QAAQ,GAAGD,IAAI,CAAChQ,aAAL,CAAmB,eAAnB,CAAjB;AAEAiQ,QAAAA,QAAQ,CAACxQ,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;AACrC;AACAsQ,UAAAA,QAAQ,CAAClM,OAAT,CAAiB,UAAAqM,SAAS,EAAI;AAC1B,gBAAIA,SAAS,KAAKF,IAAd,IAAsBE,SAAS,CAACjQ,SAAV,CAAoBkQ,QAApB,CAA6B,QAA7B,CAA1B,EAAkE;AAC9DD,cAAAA,SAAS,CAACjQ,SAAV,CAAoBqD,MAApB,CAA2B,QAA3B;AACH;AACJ,WAJD,EAFqC,CAQrC;;AACA0M,UAAAA,IAAI,CAAC/P,SAAL,CAAemQ,MAAf,CAAsB,QAAtB;AACH,SAVD;AAWH,OAdD;AAeH;AAED;;;;;;uCAGmB;AACf,UAAMC,SAAS,GAAG7Q,QAAQ,CAACG,cAAT,CAAwB,aAAxB,CAAlB;AAEA,UAAI,CAAC0Q,SAAL,EAAgB,OAHD,CAKf;;AACA7M,MAAAA,MAAM,CAAC/D,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;AACpC,YAAI+D,MAAM,CAACE,WAAP,GAAqB,GAAzB,EAA8B;AAC1B2M,UAAAA,SAAS,CAACpQ,SAAV,CAAoBC,GAApB,CAAwB,SAAxB;AACH,SAFD,MAEO;AACHmQ,UAAAA,SAAS,CAACpQ,SAAV,CAAoBqD,MAApB,CAA2B,SAA3B;AACH;AACJ,OAND,EANe,CAcf;;AACA+M,MAAAA,SAAS,CAAC5Q,gBAAV,CAA2B,OAA3B,EAAoC,YAAM;AACtC+D,QAAAA,MAAM,CAAC8M,QAAP,CAAgB;AACZC,UAAAA,GAAG,EAAE,CADO;AAEZC,UAAAA,QAAQ,EAAE;AAFE,SAAhB;AAIH,OALD;AAMH;AAED;;;;;;4CAGwB;AAAA;;AACpB;AACAhR,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,EAA6C,UAACoF,CAAD,EAAO;AAChD,QAAA,OAAI,CAAC9D,WAAL,GAAmB8D,CAAC,CAAC4L,MAAF,CAASC,QAA5B;;AACA,QAAA,OAAI,CAACC,qBAAL;AACH,OAHD;AAIH;AAED;;;;;;4CAGwB;AACpB;AACA,UAAI,KAAKlQ,GAAT,EAAc;AACV,aAAKA,GAAL,CAASmQ,SAAT,CAAmB,UAACC,KAAD,EAAW;AAC1B,cAAIA,KAAK,CAACzP,SAAV,EAAqB;AACjB,gBAAM0P,KAAK,GAAGD,KAAK,CAACE,QAAN,EAAd;;AACA,gBAAID,KAAJ,EAAW,CACP;AACA;AACH;AACJ;AACJ,SARD;AASH;AACJ;AAED;;;;;;8BAGUzM,O,EAAwB;AAAA,UAAfsD,IAAe,uEAAR,MAAQ;AAC9B;AACAnI,MAAAA,QAAQ,CAACoE,gBAAT,CAA0B,gBAA1B,EAA4CC,OAA5C,CAAoD,UAAAsF,KAAK;AAAA,eAAIA,KAAK,CAAC7F,MAAN,EAAJ;AAAA,OAAzD;AAEA,UAAM6F,KAAK,GAAG3J,QAAQ,CAAC2H,aAAT,CAAuB,KAAvB,CAAd;AACAgC,MAAAA,KAAK,CAAC/B,SAAN,2BAAmCO,IAAnC;AACAwB,MAAAA,KAAK,CAACvJ,WAAN,GAAoByE,OAApB;AACA7E,MAAAA,QAAQ,CAAC4J,IAAT,CAAc/B,WAAd,CAA0B8B,KAA1B,EAP8B,CAS9B;;AACApJ,MAAAA,UAAU,CAAC,YAAM;AACb,YAAIoJ,KAAK,CAACE,UAAV,EAAsB;AAClBF,UAAAA,KAAK,CAACE,UAAN,CAAiBC,WAAjB,CAA6BH,KAA7B;AACH;AACJ,OAJS,EAIP,IAJO,CAAV;AAKH;AAED;;;;;;wCAGoBpE,Q,EAAU;AAC1B;AACAxC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+B;AAC3B6C,QAAAA,WAAW,EAAEN,QAAQ,CAACM,WADK;AAE3BC,QAAAA,OAAO,EAAEP,QAAQ,CAACO,OAFS;AAG3B8G,QAAAA,SAAS,EAAErH,QAAQ,CAACqH;AAHO,OAA/B,EAF0B,CAQ1B;;AACA,UAAI,OAAO4E,IAAP,KAAgB,WAApB,EAAiC;AAC7BA,QAAAA,IAAI,CAAC,OAAD,EAAU,iBAAV,EAA6B;AAC7B,4BAAkB,SADW;AAE7B,yBAAejM,QAAQ,CAACM;AAFK,SAA7B,CAAJ;AAIH;AACJ;;;;KAGL;;;AACA7F,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAChD,MAAImK,WAAJ;AACH,CAFD","sourcesContent":["/**\r\n * contact.js - Logic for Contact Page\r\n * Handles form submission, map initialization, and contact functionality\r\n */\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            // Set current year\r\n            const currentYearElement = document.getElementById('currentYear');\r\n            if (currentYearElement) {\r\n                currentYearElement.textContent = new Date().getFullYear();\r\n            }\r\n            \r\n            // Hide page transition\r\n            setTimeout(function() {\r\n                document.querySelector('.page-transition').classList.add('hidden');\r\n            }, 800);\r\n            \r\n            setTimeout(function() {\r\n                document.querySelector('.page-transition').style.display = 'none';\r\n            }, 1400);\r\n            \r\n            // Initialize map\r\n            const initMap = () => {\r\n                const mapElement = document.getElementById('contactMap');\r\n                if (!mapElement) return;\r\n                \r\n                try {\r\n                    if (typeof L === 'undefined') {\r\n                        throw new Error('Leaflet library not loaded');\r\n                    }\r\n                    \r\n                    // Create the map centered between Qatar and Tunisia\r\n                    const map = L.map('contactMap').setView([28.0, 30.0], 5);\r\n                    \r\n                    // Add OpenStreetMap tile layer\r\n                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n                        attribution: '© OpenStreetMap contributors',\r\n                        maxZoom: 18,\r\n                    }).addTo(map);\r\n                    \r\n                    // Get current language\r\n                    const currentLang = localStorage.getItem('language') || 'ar';\r\n                    \r\n                    // Qatar location marker (Doha)\r\n                    const qatarMarker = L.marker([25.2854, 51.5310]).addTo(map)\r\n                        .bindPopup(`\r\n                            <div class=\"map-popup\">\r\n                                <h3>${currentLang === 'en' ? 'Qatar Operations Center' : 'مركز العمليات في قطر'}</h3>\r\n                                <p><i class=\"fas fa-phone\"></i> +974 71 375 390</p>\r\n                                <p><i class=\"fab fa-whatsapp\"></i> WhatsApp Available</p>\r\n                                <p><i class=\"fas fa-map-marker-alt\"></i> ${currentLang === 'en' ? 'Covering all Qatar areas' : 'تغطية جميع مناطق قطر'}</p>\r\n                                <a href=\"https://wa.me/97471375390\" target=\"_blank\" \r\n                                   style=\"display: inline-block; margin-top: 10px; padding: 8px 15px; background: #25D366; color: white; border-radius: 5px; text-decoration: none;\">\r\n                                    <i class=\"fab fa-whatsapp\"></i> ${currentLang === 'en' ? 'Contact on WhatsApp' : 'تواصل عبر واتساب'}\r\n                                </a>\r\n                            </div>\r\n                        `)\r\n                        .openPopup();\r\n                    \r\n                    // Tunisia location marker (Tunis)\r\n                    const tunisiaMarker = L.marker([36.8065, 10.1815]).addTo(map)\r\n                        .bindPopup(`\r\n                            <div class=\"map-popup\">\r\n                                <h3>${currentLang === 'en' ? 'Tunisia Operations Center' : 'مركز العمليات في تونس'}</h3>\r\n                                <p><i class=\"fas fa-phone\"></i> +216 56 471 550</p>\r\n                                <p><i class=\"fab fa-whatsapp\"></i> WhatsApp Available</p>\r\n                                <p><i class=\"fas fa-map-marker-alt\"></i> ${currentLang === 'en' ? 'Covering all Tunisia areas' : 'تغطية جميع مناطق تونس'}</p>\r\n                                <a href=\"https://wa.me/21656471550\" target=\"_blank\" \r\n                                   style=\"display: inline-block; margin-top: 10px; padding: 8px 15px; background: #25D366; color: white; border-radius: 5px; text-decoration: none;\">\r\n                                    <i class=\"fab fa-whatsapp\"></i> ${currentLang === 'en' ? 'Contact on WhatsApp' : 'تواصل عبر واتساب'}\r\n                                </a>\r\n                            </div>\r\n                        `);\r\n                    \r\n                    // Add coverage circles\r\n                    const qatarCircle = L.circle([25.2854, 51.5310], {\r\n                        color: '#8A1538',\r\n                        fillColor: '#8A1538',\r\n                        fillOpacity: 0.1,\r\n                        radius: 50000\r\n                    }).addTo(map).bindPopup(currentLang === 'en' ? 'Qatar Coverage Area' : 'منطقة التغطية في قطر');\r\n                    \r\n                    const tunisiaCircle = L.circle([36.8065, 10.1815], {\r\n                        color: '#E70013',\r\n                        fillColor: '#E70013',\r\n                        fillOpacity: 0.1,\r\n                        radius: 150000\r\n                    }).addTo(map).bindPopup(currentLang === 'en' ? 'Tunisia Coverage Area' : 'منطقة التغطية في تونس');\r\n                    \r\n                    // Add legend control\r\n                    const Legend = L.Control.extend({\r\n                        onAdd: function(map) {\r\n                            const div = L.DomUtil.create('div', 'map-legend');\r\n                            div.innerHTML = `\r\n                                <h4>${currentLang === 'en' ? 'Coverage Areas' : 'مناطق التغطية'}</h4>\r\n                                <div class=\"legend-item\">\r\n                                    <span class=\"legend-color\" style=\"background: #8A1538;\"></span>\r\n                                    <span>${currentLang === 'en' ? 'Qatar Coverage' : 'تغطية قطر'}</span>\r\n                                </div>\r\n                                <div class=\"legend-item\">\r\n                                    <span class=\"legend-color\" style=\"background: #E70013;\"></span>\r\n                                    <span>${currentLang === 'en' ? 'Tunisia Coverage' : 'تغطية تونس'}</span>\r\n                                </div>\r\n                                <div class=\"legend-item\">\r\n                                    <span class=\"legend-color\" style=\"background: #D4AF37;\"></span>\r\n                                    <span>${currentLang === 'en' ? 'Main Offices' : 'المكاتب الرئيسية'}</span>\r\n                                </div>\r\n                            `;\r\n                            return div;\r\n                        }\r\n                    });\r\n                    \r\n                    new Legend({ position: 'bottomright' }).addTo(map);\r\n                    \r\n                    console.log('Map initialized successfully');\r\n                    \r\n                } catch (error) {\r\n                    console.error('Error initializing map:', error);\r\n                    showMapError();\r\n                }\r\n            };\r\n            \r\n            // Show map error message\r\n            function showMapError() {\r\n                const mapElement = document.getElementById('contactMap');\r\n                if (mapElement) {\r\n                    const currentLang = localStorage.getItem('language') || 'ar';\r\n                    const translations = {\r\n                        ar: {\r\n                            errorTitle: 'تعذر تحميل الخريطة',\r\n                            errorMessage: 'حدث خطأ في تحميل الخريطة. يمكنك التواصل معنا مباشرة عبر الأرقام التالية:',\r\n                            qatarBranch: 'فرع قطر',\r\n                            tunisiaBranch: 'فرع تونس',\r\n                            alsoContact: 'يمكنك أيضاً التواصل عبر البريد الإلكتروني:'\r\n                        },\r\n                        en: {\r\n                            errorTitle: 'Map Failed to Load',\r\n                            errorMessage: 'There was an error loading the map. You can contact us directly via the following numbers:',\r\n                            qatarBranch: 'Qatar Branch',\r\n                            tunisiaBranch: 'Tunisia Branch',\r\n                            alsoContact: 'You can also contact via email:'\r\n                        }\r\n                    };\r\n                    \r\n                    const t = translations[currentLang] || translations.ar;\r\n                    \r\n                    mapElement.innerHTML = `\r\n                        <div class=\"map-error-container\">\r\n                            <div class=\"map-error-icon\">\r\n                                <i class=\"fas fa-map-marked-alt\"></i>\r\n                            </div>\r\n                            <h3>${t.errorTitle}</h3>\r\n                            <p>${t.errorMessage}</p>\r\n                            \r\n                            <div class=\"map-error-contacts\">\r\n                                <div class=\"error-contact-card\">\r\n                                    <div class=\"country-header\">\r\n                                        <img src=\"https://flagcdn.com/w40/qa.png\" alt=\"Qatar\">\r\n                                        <div>\r\n                                            <h4>${t.qatarBranch}</h4>\r\n                                            <p style=\"color: #888; margin: 5px 0 0; font-size: 0.9rem;\">${currentLang === 'en' ? 'All Qatar areas' : 'جميع مناطق قطر'}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"contact-actions\">\r\n                                        <a href=\"https://wa.me/97471375390\" class=\"whatsapp-btn\">\r\n                                            <i class=\"fab fa-whatsapp\"></i>\r\n                                            <span>WhatsApp: +974 71 375 390</span>\r\n                                        </a>\r\n                                        <a href=\"tel:+97471375390\" class=\"call-btn\">\r\n                                            <i class=\"fas fa-phone\"></i>\r\n                                            <span>${currentLang === 'en' ? 'Call Now' : 'اتصل الآن'}</span>\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                                <div class=\"error-contact-card\">\r\n                                    <div class=\"country-header\">\r\n                                        <img src=\"https://flagcdn.com/w40/tn.png\" alt=\"Tunisia\">\r\n                                        <div>\r\n                                            <h4>${t.tunisiaBranch}</h4>\r\n                                            <p style=\"color: #888; margin: 5px 0 0; font-size: 0.9rem;\">${currentLang === 'en' ? 'All Tunisia areas' : 'جميع مناطق تونس'}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"contact-actions\">\r\n                                        <a href=\"https://wa.me/21656471550\" class=\"whatsapp-btn\">\r\n                                            <i class=\"fab fa-whatsapp\"></i>\r\n                                            <span>WhatsApp: +216 56 471 550</span>\r\n                                        </a>\r\n                                        <a href=\"tel:+21656471550\" class=\"call-btn\">\r\n                                            <i class=\"fas fa-phone\"></i>\r\n                                            <span>${currentLang === 'en' ? 'Call Now' : 'اتصل الآن'}</span>\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div style=\"margin-top: 20px; padding: 20px; background: rgba(212, 175, 55, 0.1); border-radius: 8px;\">\r\n                                <p><strong>${t.alsoContact}</strong></p>\r\n                                <p><i class=\"fas fa-envelope\" style=\"color: #D4AF37; margin-left: 5px;\"></i> \r\n                                <a href=\"mailto:helamishwar@gmail.com\" style=\"color: #8A1538;\">helamishwar@gmail.com</a></p>\r\n                            </div>\r\n                        </div>\r\n                    `;\r\n                }\r\n            }\r\n            \r\n            // Start map initialization\r\n            setTimeout(() => {\r\n                initMap();\r\n            }, 500);\r\n            \r\n            // Quick contact widget\r\n            const widget = document.querySelector('.quick-contact-widget');\r\n            const widgetClose = document.querySelector('.widget-close');\r\n            \r\n            if (widget && widgetClose) {\r\n                // Show widget after 5 seconds\r\n                setTimeout(() => {\r\n                    widget.classList.add('active');\r\n                }, 5000);\r\n                \r\n                // Close widget\r\n                widgetClose.addEventListener('click', function() {\r\n                    widget.classList.remove('active');\r\n                });\r\n                \r\n                // Hide widget on scroll down\r\n                let lastScrollTop = 0;\r\n                window.addEventListener('scroll', function() {\r\n                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n                    \r\n                    if (scrollTop > lastScrollTop) {\r\n                        // Scrolling down - hide widget\r\n                        widget.classList.remove('active');\r\n                    } else {\r\n                        // Scrolling up - show widget if scrolled enough\r\n                        if (scrollTop > 500) {\r\n                            widget.classList.add('active');\r\n                        }\r\n                    }\r\n                    \r\n                    lastScrollTop = scrollTop;\r\n                });\r\n            }\r\n            \r\n            // Copy button functionality\r\n            document.querySelectorAll('.copy-btn').forEach(button => {\r\n                button.addEventListener('click', function() {\r\n                    const textToCopy = this.getAttribute('data-text') || this.getAttribute('data-number');\r\n                    if (textToCopy) {\r\n                        navigator.clipboard.writeText(textToCopy).then(() => {\r\n                            const currentLang = localStorage.getItem('language') || 'ar';\r\n                            const message = currentLang === 'en' ? 'Copied to clipboard!' : 'تم النسخ إلى الحافظة!';\r\n                            showToast(message, 'success');\r\n                        }).catch(err => {\r\n                            console.error('Failed to copy: ', err);\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n            \r\n            // Character counter for message textarea\r\n            const messageTextarea = document.getElementById('message');\r\n            const charCount = document.querySelector('.char-count');\r\n            \r\n            if (messageTextarea && charCount) {\r\n                messageTextarea.addEventListener('input', function() {\r\n                    const length = this.value.length;\r\n                    charCount.textContent = length + '/2000 ' + (localStorage.getItem('language') === 'en' ? 'characters' : 'حرف');\r\n                    \r\n                    if (length > 1900) {\r\n                        charCount.style.color = '#ff6b6b';\r\n                    } else if (length > 1500) {\r\n                        charCount.style.color = '#ffa726';\r\n                    } else {\r\n                        charCount.style.color = '#666';\r\n                    }\r\n                });\r\n            }\r\n            \r\n            // Form submission\r\n            const contactForm = document.getElementById('contactForm');\r\n            if (contactForm) {\r\n                contactForm.addEventListener('submit', function(e) {\r\n                    e.preventDefault();\r\n                    \r\n                    // Get form data\r\n                    const formData = {\r\n                        fullName: document.getElementById('fullName').value,\r\n                        countryCode: document.getElementById('countryCode').value,\r\n                        phoneNumber: document.getElementById('phoneNumber').value,\r\n                        email: document.getElementById('email').value,\r\n                        preferredContact: document.getElementById('preferredContact').value,\r\n                        serviceType: document.getElementById('serviceType').value,\r\n                        urgency: document.getElementById('urgency').value,\r\n                        messageSubject: document.getElementById('messageSubject').value,\r\n                        message: document.getElementById('message').value,\r\n                        privacyPolicy: document.getElementById('privacyPolicy').checked\r\n                    };\r\n                    \r\n                    // Validate form\r\n                    if (!formData.privacyPolicy) {\r\n                        const currentLang = localStorage.getItem('language') || 'ar';\r\n                        const message = currentLang === 'en' \r\n                            ? 'Please accept the privacy policy' \r\n                            : 'يرجى الموافقة على سياسة الخصوصية';\r\n                        showToast(message, 'error');\r\n                        return;\r\n                    }\r\n                    \r\n                    // Format message for WhatsApp\r\n                    const whatsappMessage = `\r\n*New Contact Form Submission - Tn-QA Delivery*\r\n\r\n*👤 Personal Information:*\r\n• Name: ${formData.fullName}\r\n• Phone: ${formData.countryCode} ${formData.phoneNumber}\r\n• Email: ${formData.email || 'Not provided'}\r\n• Preferred Contact: ${formData.preferredContact}\r\n\r\n*📦 Service Information:*\r\n• Service Type: ${formData.serviceType}\r\n• Urgency: ${formData.urgency}\r\n• Subject: ${formData.messageSubject}\r\n\r\n*💬 Message:*\r\n${formData.message}\r\n\r\n*📅 Submitted on:* ${new Date().toLocaleString()}\r\n                    `.trim();\r\n                    \r\n                    // Encode for WhatsApp URL\r\n                    const encodedMessage = encodeURIComponent(whatsappMessage);\r\n                    const whatsappNumber = formData.countryCode === '+216' ? '21656471550' : '97471375390';\r\n                    const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;\r\n                    \r\n                    // Open WhatsApp in new tab\r\n                    window.open(whatsappURL, '_blank');\r\n                    \r\n                    // Show success message\r\n                    const currentLang = localStorage.getItem('language') || 'ar';\r\n                    const message = currentLang === 'en' \r\n                        ? 'Form submitted successfully! Opening WhatsApp...' \r\n                        : 'تم إرسال النموذج بنجاح! جارٍ فتح الواتساب...';\r\n                    showToast(message, 'success');\r\n                    \r\n                    // Reset form after 2 seconds\r\n                    setTimeout(() => {\r\n                        contactForm.reset();\r\n                        if (charCount) {\r\n                            charCount.textContent = '0/2000 ' + (currentLang === 'en' ? 'characters' : 'حرف');\r\n                            charCount.style.color = '#666';\r\n                        }\r\n                    }, 2000);\r\n                });\r\n            }\r\n            \r\n            // Clear form button\r\n            const clearFormBtn = document.getElementById('clearForm');\r\n            if (clearFormBtn) {\r\n                clearFormBtn.addEventListener('click', function() {\r\n                    if (confirm(localStorage.getItem('language') === 'en' \r\n                        ? 'Are you sure you want to clear the form?' \r\n                        : 'هل أنت متأكد من مسح النموذج؟')) {\r\n                        contactForm.reset();\r\n                        const currentLang = localStorage.getItem('language') || 'ar';\r\n                        if (charCount) {\r\n                            charCount.textContent = '0/2000 ' + (currentLang === 'en' ? 'characters' : 'حرف');\r\n                            charCount.style.color = '#666';\r\n                        }\r\n                        showToast(currentLang === 'en' ? 'Form cleared' : 'تم مسح النموذج', 'info');\r\n                    }\r\n                });\r\n            }\r\n            \r\n            // File upload functionality\r\n            const fileUpload = document.getElementById('fileUpload');\r\n            const fileUploadArea = document.getElementById('fileUploadArea');\r\n            const fileList = document.getElementById('fileList');\r\n            \r\n            if (fileUpload && fileUploadArea) {\r\n                // Click on area to trigger file input\r\n                fileUploadArea.addEventListener('click', function() {\r\n                    fileUpload.click();\r\n                });\r\n                \r\n                // Handle file selection\r\n                fileUpload.addEventListener('change', function() {\r\n                    updateFileList();\r\n                });\r\n                \r\n                // Drag and drop functionality\r\n                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\r\n                    fileUploadArea.addEventListener(eventName, preventDefaults, false);\r\n                });\r\n                \r\n                function preventDefaults(e) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                }\r\n                \r\n                ['dragenter', 'dragover'].forEach(eventName => {\r\n                    fileUploadArea.addEventListener(eventName, highlight, false);\r\n                });\r\n                \r\n                ['dragleave', 'drop'].forEach(eventName => {\r\n                    fileUploadArea.addEventListener(eventName, unhighlight, false);\r\n                });\r\n                \r\n                function highlight() {\r\n                    fileUploadArea.classList.add('highlight');\r\n                }\r\n                \r\n                function unhighlight() {\r\n                    fileUploadArea.classList.remove('highlight');\r\n                }\r\n                \r\n                fileUploadArea.addEventListener('drop', handleDrop, false);\r\n                \r\n                function handleDrop(e) {\r\n                    const dt = e.dataTransfer;\r\n                    const files = dt.files;\r\n                    fileUpload.files = files;\r\n                    updateFileList();\r\n                }\r\n                \r\n                function updateFileList() {\r\n                    if (!fileList) return;\r\n                    \r\n                    fileList.innerHTML = '';\r\n                    const files = fileUpload.files;\r\n                    \r\n                    if (files.length === 0) {\r\n                        return;\r\n                    }\r\n                    \r\n                    const currentLang = localStorage.getItem('language') || 'ar';\r\n                    const fileCountText = currentLang === 'en' \r\n                        ? `${files.length} file(s) selected` \r\n                        : `تم اختيار ${files.length} ملف(ات)`;\r\n                    \r\n                    const header = document.createElement('div');\r\n                    header.className = 'file-list-header';\r\n                    header.innerHTML = `\r\n                        <span>${fileCountText}</span>\r\n                        <button type=\"button\" class=\"clear-files-btn\">\r\n                            ${currentLang === 'en' ? 'Clear All' : 'مسح الكل'}\r\n                        </button>\r\n                    `;\r\n                    fileList.appendChild(header);\r\n                    \r\n                    // Add clear files button functionality\r\n                    const clearFilesBtn = header.querySelector('.clear-files-btn');\r\n                    clearFilesBtn.addEventListener('click', function() {\r\n                        fileUpload.value = '';\r\n                        updateFileList();\r\n                    });\r\n                    \r\n                    // List files\r\n                    for (let i = 0; i < files.length; i++) {\r\n                        const file = files[i];\r\n                        const fileItem = document.createElement('div');\r\n                        fileItem.className = 'file-item';\r\n                        \r\n                        // Get file icon based on type\r\n                        let fileIcon = 'fa-file';\r\n                        if (file.type.startsWith('image/')) {\r\n                            fileIcon = 'fa-file-image';\r\n                        } else if (file.type === 'application/pdf') {\r\n                            fileIcon = 'fa-file-pdf';\r\n                        } else if (file.type.includes('word') || file.name.endsWith('.doc') || file.name.endsWith('.docx')) {\r\n                            fileIcon = 'fa-file-word';\r\n                        }\r\n                        \r\n                        // Format file size\r\n                        const fileSize = formatFileSize(file.size);\r\n                        \r\n                        fileItem.innerHTML = `\r\n                            <div class=\"file-info\">\r\n                                <i class=\"fas ${fileIcon}\"></i>\r\n                                <div>\r\n                                    <span class=\"file-name\">${file.name}</span>\r\n                                    <span class=\"file-size\">${fileSize}</span>\r\n                                </div>\r\n                            </div>\r\n                            <button type=\"button\" class=\"remove-file-btn\" data-index=\"${i}\">\r\n                                <i class=\"fas fa-times\"></i>\r\n                            </button>\r\n                        `;\r\n                        \r\n                        fileList.appendChild(fileItem);\r\n                    }\r\n                    \r\n                    // Add remove file functionality\r\n                    fileList.querySelectorAll('.remove-file-btn').forEach(btn => {\r\n                        btn.addEventListener('click', function() {\r\n                            const index = parseInt(this.getAttribute('data-index'));\r\n                            removeFile(index);\r\n                        });\r\n                    });\r\n                }\r\n                \r\n                function removeFile(index) {\r\n                    const dt = new DataTransfer();\r\n                    const files = fileUpload.files;\r\n                    \r\n                    for (let i = 0; i < files.length; i++) {\r\n                        if (i !== index) {\r\n                            dt.items.add(files[i]);\r\n                        }\r\n                    }\r\n                    \r\n                    fileUpload.files = dt.files;\r\n                    updateFileList();\r\n                }\r\n                \r\n                function formatFileSize(bytes) {\r\n                    if (bytes === 0) return '0 Bytes';\r\n                    const k = 1024;\r\n                    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n                    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n                    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n                }\r\n            }\r\n            \r\n            // Toast notification function\r\n            function showToast(message, type = 'info') {\r\n                // Remove existing toasts\r\n                document.querySelectorAll('.toast-message').forEach(toast => toast.remove());\r\n                \r\n                const toast = document.createElement('div');\r\n                toast.className = `toast-message ${type}`;\r\n                toast.textContent = message;\r\n                document.body.appendChild(toast);\r\n                \r\n                // Remove toast after animation\r\n                setTimeout(() => {\r\n                    if (toast.parentNode) {\r\n                        toast.parentNode.removeChild(toast);\r\n                    }\r\n                }, 3000);\r\n            }\r\n            \r\n            // Initialize AOS animations if available\r\n            if (typeof AOS !== 'undefined') {\r\n                AOS.init({\r\n                    duration: 800,\r\n                    once: true,\r\n                    offset: 100\r\n                });\r\n            }\r\n        });\r\nclass ContactPage {\r\n    constructor() {\r\n        this.map = null;\r\n        this.formSubmitted = false;\r\n        this.files = [];\r\n        this.currentLang = localStorage.getItem('language') || 'ar';\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.initializeMap();\r\n        this.setupFormValidation();\r\n        this.setupCopyButtons();\r\n        this.setupFileUpload();\r\n        this.setupQuickWidget();\r\n        this.setupCharacterCounter();\r\n        this.setupFAQAccordion();\r\n        this.setupScrollToTop();\r\n        this.setupLanguageListener();\r\n    }\r\n\r\n    /**\r\n     * Initialize Leaflet Map\r\n     */\r\n    initializeMap() {\r\n        const mapElement = document.getElementById('contactMap');\r\n        if (!mapElement) return;\r\n\r\n        try {\r\n            // Check if Leaflet is loaded\r\n            if (typeof L === 'undefined') {\r\n                throw new Error('Leaflet library not loaded');\r\n            }\r\n\r\n            // Create map centered between Qatar and Tunisia\r\n            this.map = L.map('contactMap').setView([28.0, 30.0], 5);\r\n\r\n            // Add OpenStreetMap tile layer\r\n            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n                attribution: '© OpenStreetMap contributors',\r\n                maxZoom: 18,\r\n            }).addTo(this.map);\r\n\r\n            // Qatar location marker (Doha)\r\n            const qatarMarker = L.marker([25.2854, 51.5310]).addTo(this.map)\r\n                .bindPopup(this.createPopupContent('qatar'))\r\n                .openPopup();\r\n\r\n            // Tunisia location marker (Tunis)\r\n            const tunisiaMarker = L.marker([36.8065, 10.1815]).addTo(this.map)\r\n                .bindPopup(this.createPopupContent('tunisia'));\r\n\r\n            // Add coverage circles\r\n            this.addCoverageAreas();\r\n\r\n            // Add legend\r\n            this.addMapLegend();\r\n\r\n            console.log('Map initialized successfully');\r\n\r\n        } catch (error) {\r\n            console.error('Error initializing map:', error);\r\n            this.showMapError();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create popup content for map markers\r\n     */\r\n    createPopupContent(country) {\r\n        const isQatar = country === 'qatar';\r\n        const translations = {\r\n            ar: {\r\n                qatarTitle: 'مركز العمليات في قطر',\r\n                tunisiaTitle: 'مركز العمليات في تونس',\r\n                phone: 'الهاتف',\r\n                whatsapp: 'واتساب متوفر',\r\n                coverage: 'تغطية جميع المناطق',\r\n                contactBtn: 'تواصل عبر واتساب'\r\n            },\r\n            en: {\r\n                qatarTitle: 'Qatar Operations Center',\r\n                tunisiaTitle: 'Tunisia Operations Center',\r\n                phone: 'Phone',\r\n                whatsapp: 'WhatsApp Available',\r\n                coverage: 'Covering all areas',\r\n                contactBtn: 'Contact on WhatsApp'\r\n            }\r\n        };\r\n\r\n        const t = translations[this.currentLang] || translations.ar;\r\n        const phone = isQatar ? '+974 71 375 390' : '+216 56 471 550';\r\n        const whatsapp = isQatar ? '97471375390' : '21656471550';\r\n\r\n        return `\r\n            <div class=\"map-popup\">\r\n                <h3>${isQatar ? t.qatarTitle : t.tunisiaTitle}</h3>\r\n                <p><i class=\"fas fa-phone\"></i> ${phone}</p>\r\n                <p><i class=\"fab fa-whatsapp\"></i> ${t.whatsapp}</p>\r\n                <p><i class=\"fas fa-map-marker-alt\"></i> ${t.coverage}</p>\r\n                <a href=\"https://wa.me/${whatsapp}\" target=\"_blank\" \r\n                   class=\"map-popup-btn\">\r\n                    <i class=\"fab fa-whatsapp\"></i> ${t.contactBtn}\r\n                </a>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    /**\r\n     * Add coverage areas to map\r\n     */\r\n    addCoverageAreas() {\r\n        // Qatar coverage circle\r\n        L.circle([25.2854, 51.5310], {\r\n            color: '#8A1538',\r\n            fillColor: '#8A1538',\r\n            fillOpacity: 0.1,\r\n            radius: 50000\r\n        }).addTo(this.map).bindPopup(this.currentLang === 'en' \r\n            ? 'Qatar Coverage Area' \r\n            : 'منطقة التغطية في قطر');\r\n\r\n        // Tunisia coverage circle\r\n        L.circle([36.8065, 10.1815], {\r\n            color: '#E70013',\r\n            fillColor: '#E70013',\r\n            fillOpacity: 0.1,\r\n            radius: 150000\r\n        }).addTo(this.map).bindPopup(this.currentLang === 'en' \r\n            ? 'Tunisia Coverage Area' \r\n            : 'منطقة التغطية في تونس');\r\n    }\r\n\r\n    /**\r\n     * Add legend to map\r\n     */\r\n    addMapLegend() {\r\n        const Legend = L.Control.extend({\r\n            onAdd: function(map) {\r\n                const div = L.DomUtil.create('div', 'map-legend');\r\n                const translations = {\r\n                    ar: {\r\n                        coverage: 'مناطق التغطية',\r\n                        qatar: 'تغطية قطر',\r\n                        tunisia: 'تغطية تونس',\r\n                        offices: 'المكاتب الرئيسية'\r\n                    },\r\n                    en: {\r\n                        coverage: 'Coverage Areas',\r\n                        qatar: 'Qatar Coverage',\r\n                        tunisia: 'Tunisia Coverage',\r\n                        offices: 'Main Offices'\r\n                    }\r\n                };\r\n                \r\n                const t = translations[localStorage.getItem('language') || 'ar'] || translations.ar;\r\n                \r\n                div.innerHTML = `\r\n                    <h4>${t.coverage}</h4>\r\n                    <div class=\"legend-item\">\r\n                        <span class=\"legend-color\" style=\"background: #8A1538;\"></span>\r\n                        <span>${t.qatar}</span>\r\n                    </div>\r\n                    <div class=\"legend-item\">\r\n                        <span class=\"legend-color\" style=\"background: #E70013;\"></span>\r\n                        <span>${t.tunisia}</span>\r\n                    </div>\r\n                    <div class=\"legend-item\">\r\n                        <span class=\"legend-color\" style=\"background: #D4AF37;\"></span>\r\n                        <span>${t.offices}</span>\r\n                    </div>\r\n                `;\r\n                return div;\r\n            }\r\n        });\r\n\r\n        new Legend({ position: 'bottomright' }).addTo(this.map);\r\n    }\r\n\r\n    /**\r\n     * Show map error message\r\n     */\r\n    showMapError() {\r\n        const mapElement = document.getElementById('contactMap');\r\n        if (!mapElement) return;\r\n\r\n        const translations = {\r\n            ar: {\r\n                errorTitle: 'تعذر تحميل الخريطة',\r\n                errorMessage: 'حدث خطأ في تحميل الخريطة. يمكنك التواصل معنا مباشرة عبر الأرقام التالية:',\r\n                qatarBranch: 'فرع قطر',\r\n                tunisiaBranch: 'فرع تونس',\r\n                alsoContact: 'يمكنك أيضاً التواصل عبر البريد الإلكتروني:',\r\n                allQatar: 'جميع مناطق قطر',\r\n                allTunisia: 'جميع مناطق تونس',\r\n                callNow: 'اتصل الآن'\r\n            },\r\n            en: {\r\n                errorTitle: 'Map Failed to Load',\r\n                errorMessage: 'There was an error loading the map. You can contact us directly via the following numbers:',\r\n                qatarBranch: 'Qatar Branch',\r\n                tunisiaBranch: 'Tunisia Branch',\r\n                alsoContact: 'You can also contact via email:',\r\n                allQatar: 'All Qatar areas',\r\n                allTunisia: 'All Tunisia areas',\r\n                callNow: 'Call Now'\r\n            }\r\n        };\r\n\r\n        const t = translations[this.currentLang] || translations.ar;\r\n\r\n        mapElement.innerHTML = `\r\n            <div class=\"map-error-container\">\r\n                <div class=\"map-error-icon\">\r\n                    <i class=\"fas fa-map-marked-alt\"></i>\r\n                </div>\r\n                <h3>${t.errorTitle}</h3>\r\n                <p>${t.errorMessage}</p>\r\n                \r\n                <div class=\"map-error-contacts\">\r\n                    <div class=\"error-contact-card\">\r\n                        <div class=\"country-header\">\r\n                            <img src=\"https://flagcdn.com/w40/qa.png\" alt=\"Qatar\">\r\n                            <div>\r\n                                <h4>${t.qatarBranch}</h4>\r\n                                <p style=\"color: #888; margin: 5px 0 0; font-size: 0.9rem;\">${t.allQatar}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"contact-actions\">\r\n                            <a href=\"https://wa.me/97471375390\" class=\"whatsapp-btn\">\r\n                                <i class=\"fab fa-whatsapp\"></i>\r\n                                <span>WhatsApp: +974 71 375 390</span>\r\n                            </a>\r\n                            <a href=\"tel:+97471375390\" class=\"call-btn\">\r\n                                <i class=\"fas fa-phone\"></i>\r\n                                <span>${t.callNow}</span>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class=\"error-contact-card\">\r\n                        <div class=\"country-header\">\r\n                            <img src=\"https://flagcdn.com/w40/tn.png\" alt=\"Tunisia\">\r\n                            <div>\r\n                                <h4>${t.tunisiaBranch}</h4>\r\n                                <p style=\"color: #888; margin: 5px 0 0; font-size: 0.9rem;\">${t.allTunisia}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"contact-actions\">\r\n                            <a href=\"https://wa.me/21656471550\" class=\"whatsapp-btn\">\r\n                                <i class=\"fab fa-whatsapp\"></i>\r\n                                <span>WhatsApp: +216 56 471 550</span>\r\n                            </a>\r\n                            <a href=\"tel:+21656471550\" class=\"call-btn\">\r\n                                <i class=\"fas fa-phone\"></i>\r\n                                <span>${t.callNow}</span>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div style=\"margin-top: 20px; padding: 20px; background: rgba(212, 175, 55, 0.1); border-radius: 8px;\">\r\n                    <p><strong>${t.alsoContact}</strong></p>\r\n                    <p><i class=\"fas fa-envelope\" style=\"color: #D4AF37; margin-left: 5px;\"></i> \r\n                    <a href=\"mailto:helamishwar@gmail.com\" style=\"color: #8A1538;\">helamishwar@gmail.com</a></p>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    /**\r\n     * Setup form validation and submission\r\n     */\r\n    setupFormValidation() {\r\n        const contactForm = document.getElementById('contactForm');\r\n        if (!contactForm) return;\r\n\r\n        contactForm.addEventListener('submit', (e) => this.handleFormSubmit(e));\r\n\r\n        // Clear form button\r\n        const clearFormBtn = document.getElementById('clearForm');\r\n        if (clearFormBtn) {\r\n            clearFormBtn.addEventListener('click', () => this.clearForm());\r\n        }\r\n\r\n        // Real-time validation\r\n        this.setupRealTimeValidation();\r\n    }\r\n\r\n    /**\r\n     * Handle form submission\r\n     */\r\n    handleFormSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        if (this.formSubmitted) {\r\n            this.showToast(\r\n                this.currentLang === 'en' \r\n                    ? 'Please wait while we process your previous request' \r\n                    : 'يرجى الانتظار أثناء معالجة طلبك السابق',\r\n                'warning'\r\n            );\r\n            return;\r\n        }\r\n\r\n        // Validate form\r\n        if (!this.validateForm()) {\r\n            return;\r\n        }\r\n\r\n        // Show loading state\r\n        this.setFormLoading(true);\r\n\r\n        // Get form data\r\n        const formData = this.getFormData();\r\n\r\n        // Prepare WhatsApp message\r\n        const whatsappMessage = this.formatWhatsAppMessage(formData);\r\n        const whatsappURL = this.createWhatsAppURL(formData, whatsappMessage);\r\n\r\n        // Open WhatsApp\r\n        this.openWhatsApp(whatsappURL, formData);\r\n    }\r\n\r\n    /**\r\n     * Validate form data\r\n     */\r\n    validateForm() {\r\n        const fullName = document.getElementById('fullName').value.trim();\r\n        const phoneNumber = document.getElementById('phoneNumber').value.trim();\r\n        const messageSubject = document.getElementById('messageSubject').value.trim();\r\n        const message = document.getElementById('message').value.trim();\r\n        const privacyPolicy = document.getElementById('privacyPolicy').checked;\r\n        const serviceType = document.getElementById('serviceType').value;\r\n\r\n        // Check required fields\r\n        if (!fullName) {\r\n            this.showToast(\r\n                this.currentLang === 'en' ? 'Please enter your full name' : 'يرجى إدخال الاسم الكامل',\r\n                'error'\r\n            );\r\n            return false;\r\n        }\r\n\r\n        if (!phoneNumber) {\r\n            this.showToast(\r\n                this.currentLang === 'en' ? 'Please enter your phone number' : 'يرجى إدخال رقم الهاتف',\r\n                'error'\r\n            );\r\n            return false;\r\n        }\r\n\r\n        if (!serviceType || serviceType === '') {\r\n            this.showToast(\r\n                this.currentLang === 'en' ? 'Please select a service type' : 'يرجى اختيار نوع الخدمة',\r\n                'error'\r\n            );\r\n            return false;\r\n        }\r\n\r\n        if (!messageSubject) {\r\n            this.showToast(\r\n                this.currentLang === 'en' ? 'Please enter a message subject' : 'يرجى إدخال موضوع الرسالة',\r\n                'error'\r\n            );\r\n            return false;\r\n        }\r\n\r\n        if (!message) {\r\n            this.showToast(\r\n                this.currentLang === 'en' ? 'Please enter your message' : 'يرجى إدخال الرسالة',\r\n                'error'\r\n            );\r\n            return false;\r\n        }\r\n\r\n        if (message.length < 10) {\r\n            this.showToast(\r\n                this.currentLang === 'en' ? 'Message is too short (minimum 10 characters)' : 'الرسالة قصيرة جداً (الحد الأدنى 10 أحرف)',\r\n                'error'\r\n            );\r\n            return false;\r\n        }\r\n\r\n        if (!privacyPolicy) {\r\n            this.showToast(\r\n                this.currentLang === 'en' \r\n                    ? 'Please accept the privacy policy' \r\n                    : 'يرجى الموافقة على سياسة الخصوصية',\r\n                'error'\r\n            );\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Get form data\r\n     */\r\n    getFormData() {\r\n        return {\r\n            fullName: document.getElementById('fullName').value.trim(),\r\n            countryCode: document.getElementById('countryCode').value,\r\n            phoneNumber: document.getElementById('phoneNumber').value.trim(),\r\n            email: document.getElementById('email').value.trim(),\r\n            preferredContact: document.getElementById('preferredContact').value,\r\n            serviceType: document.getElementById('serviceType').value,\r\n            serviceTypeText: document.getElementById('serviceType').selectedOptions[0].text,\r\n            urgency: document.getElementById('urgency').value,\r\n            messageSubject: document.getElementById('messageSubject').value.trim(),\r\n            message: document.getElementById('message').value.trim(),\r\n            privacyPolicy: document.getElementById('privacyPolicy').checked,\r\n            files: this.files,\r\n            timestamp: new Date().toLocaleString()\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Format WhatsApp message\r\n     */\r\n    formatWhatsAppMessage(formData) {\r\n        const translations = {\r\n            ar: {\r\n                title: '📋 طلب جديد - Tn-QA Delivery',\r\n                personalInfo: '👤 المعلومات الشخصية:',\r\n                name: 'الاسم',\r\n                phone: 'الهاتف',\r\n                email: 'البريد الإلكتروني',\r\n                preferredContact: 'طريقة التواصل المفضلة',\r\n                serviceInfo: '📦 معلومات الخدمة:',\r\n                serviceType: 'نوع الخدمة',\r\n                urgency: 'درجة الاستعجال',\r\n                subject: 'الموضوع',\r\n                message: '💬 الرسالة:',\r\n                submitted: '📅 وقت الإرسال:',\r\n                notProvided: 'غير مقدم',\r\n                any: 'أي طريقة',\r\n                normal: 'عادي',\r\n                urgent: 'عاجل',\r\n                emergency: 'طارئ'\r\n            },\r\n            en: {\r\n                title: '📋 New Contact Form Submission - Tn-QA Delivery',\r\n                personalInfo: '👤 Personal Information:',\r\n                name: 'Name',\r\n                phone: 'Phone',\r\n                email: 'Email',\r\n                preferredContact: 'Preferred Contact',\r\n                serviceInfo: '📦 Service Information:',\r\n                serviceType: 'Service Type',\r\n                urgency: 'Urgency Level',\r\n                subject: 'Subject',\r\n                message: '💬 Message:',\r\n                submitted: '📅 Submitted on:',\r\n                notProvided: 'Not provided',\r\n                any: 'Any method',\r\n                normal: 'Normal',\r\n                urgent: 'Urgent',\r\n                emergency: 'Emergency'\r\n            }\r\n        };\r\n\r\n        const t = translations[this.currentLang] || translations.ar;\r\n        const urgencyMap = {\r\n            normal: t.normal,\r\n            urgent: t.urgent,\r\n            emergency: t.emergency\r\n        };\r\n\r\n        const contactMethodMap = {\r\n            whatsapp: this.currentLang === 'en' ? 'WhatsApp' : 'واتساب',\r\n            phone: this.currentLang === 'en' ? 'Phone Call' : 'مكالمة هاتفية',\r\n            email: this.currentLang === 'en' ? 'Email' : 'بريد إلكتروني',\r\n            any: t.any\r\n        };\r\n\r\n        return `\r\n${t.title}\r\n\r\n*${t.personalInfo}*\r\n• ${t.name}: ${formData.fullName}\r\n• ${t.phone}: ${formData.countryCode} ${formData.phoneNumber}\r\n• ${t.email}: ${formData.email || t.notProvided}\r\n• ${t.preferredContact}: ${contactMethodMap[formData.preferredContact] || formData.preferredContact}\r\n\r\n*${t.serviceInfo}*\r\n• ${t.serviceType}: ${formData.serviceTypeText}\r\n• ${t.urgency}: ${urgencyMap[formData.urgency] || formData.urgency}\r\n• ${t.subject}: ${formData.messageSubject}\r\n\r\n*${t.message}*\r\n${formData.message}\r\n\r\n${formData.files.length > 0 ? `\\n📎 ${formData.files.length} file(s) attached` : ''}\r\n\r\n*${t.submitted}* ${formData.timestamp}\r\n        `.trim();\r\n    }\r\n\r\n    /**\r\n     * Create WhatsApp URL\r\n     */\r\n    createWhatsAppURL(formData, message) {\r\n        const whatsappNumber = formData.countryCode === '+216' ? '21656471550' : '97471375390';\r\n        const encodedMessage = encodeURIComponent(message);\r\n        return `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;\r\n    }\r\n\r\n    /**\r\n     * Open WhatsApp with form data\r\n     */\r\n    openWhatsApp(url, formData) {\r\n        // Open WhatsApp in new tab\r\n        const newWindow = window.open(url, '_blank');\r\n        \r\n        if (newWindow) {\r\n            this.showSuccessMessage();\r\n            this.formSubmitted = true;\r\n            \r\n            // Reset form after delay\r\n            setTimeout(() => {\r\n                this.clearForm();\r\n                this.formSubmitted = false;\r\n            }, 3000);\r\n            \r\n            // Track submission\r\n            this.trackFormSubmission(formData);\r\n        } else {\r\n            this.showToast(\r\n                this.currentLang === 'en' \r\n                    ? 'Please allow pop-ups to open WhatsApp' \r\n                    : 'يرجى السماح بالنوافذ المنبثقة لفتح الواتساب',\r\n                'error'\r\n            );\r\n            this.setFormLoading(false);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Show success message\r\n     */\r\n    showSuccessMessage() {\r\n        const successMessage = document.getElementById('successMessage');\r\n        const errorMessage = document.getElementById('errorMessage');\r\n        \r\n        if (successMessage) successMessage.style.display = 'flex';\r\n        if (errorMessage) errorMessage.style.display = 'none';\r\n        \r\n        this.showToast(\r\n            this.currentLang === 'en' \r\n                ? 'Form submitted successfully! Opening WhatsApp...' \r\n                : 'تم إرسال النموذج بنجاح! جارٍ فتح الواتساب...',\r\n            'success'\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Show error message\r\n     */\r\n    showErrorMessage(message) {\r\n        const successMessage = document.getElementById('successMessage');\r\n        const errorMessage = document.getElementById('errorMessage');\r\n        const errorText = document.getElementById('errorText');\r\n        \r\n        if (successMessage) successMessage.style.display = 'none';\r\n        if (errorMessage) errorMessage.style.display = 'flex';\r\n        if (errorText) errorText.textContent = message;\r\n        \r\n        this.showToast(message, 'error');\r\n    }\r\n\r\n    /**\r\n     * Set form loading state\r\n     */\r\n    setFormLoading(isLoading) {\r\n        const submitBtn = document.getElementById('submitForm');\r\n        const loader = document.getElementById('formLoader');\r\n        \r\n        if (submitBtn) {\r\n            submitBtn.disabled = isLoading;\r\n        }\r\n        \r\n        if (loader) {\r\n            loader.style.display = isLoading ? 'block' : 'none';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear form data\r\n     */\r\n    clearForm() {\r\n        if (confirm(\r\n            this.currentLang === 'en' \r\n                ? 'Are you sure you want to clear the form?' \r\n                : 'هل أنت متأكد من مسح النموذج؟'\r\n        )) {\r\n            const contactForm = document.getElementById('contactForm');\r\n            if (contactForm) {\r\n                contactForm.reset();\r\n                this.files = [];\r\n                this.updateFileList();\r\n                \r\n                // Reset character counter\r\n                const charCount = document.querySelector('.char-count');\r\n                if (charCount) {\r\n                    charCount.textContent = `0/2000 ${this.currentLang === 'en' ? 'characters' : 'حرف'}`;\r\n                    charCount.style.color = '#666';\r\n                }\r\n                \r\n                // Hide status messages\r\n                const successMessage = document.getElementById('successMessage');\r\n                const errorMessage = document.getElementById('errorMessage');\r\n                if (successMessage) successMessage.style.display = 'none';\r\n                if (errorMessage) errorMessage.style.display = 'none';\r\n                \r\n                this.showToast(\r\n                    this.currentLang === 'en' ? 'Form cleared' : 'تم مسح النموذج',\r\n                    'info'\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Setup real-time form validation\r\n     */\r\n    setupRealTimeValidation() {\r\n        const inputs = document.querySelectorAll('#contactForm input, #contactForm textarea, #contactForm select');\r\n        \r\n        inputs.forEach(input => {\r\n            input.addEventListener('blur', () => this.validateField(input));\r\n            input.addEventListener('input', () => this.clearFieldError(input));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Validate individual field\r\n     */\r\n    validateField(field) {\r\n        const value = field.value.trim();\r\n        const fieldName = field.id || field.name;\r\n        \r\n        switch (fieldName) {\r\n            case 'fullName':\r\n                if (value.length < 2) {\r\n                    this.showFieldError(field, this.currentLang === 'en' \r\n                        ? 'Name must be at least 2 characters' \r\n                        : 'الاسم يجب أن يكون على الأقل حرفين');\r\n                    return false;\r\n                }\r\n                break;\r\n                \r\n            case 'phoneNumber':\r\n                const phoneRegex = /^[0-9]{8,15}$/;\r\n                if (!phoneRegex.test(value)) {\r\n                    this.showFieldError(field, this.currentLang === 'en' \r\n                        ? 'Please enter a valid phone number' \r\n                        : 'يرجى إدخال رقم هاتف صحيح');\r\n                    return false;\r\n                }\r\n                break;\r\n                \r\n            case 'email':\r\n                if (value && !this.isValidEmail(value)) {\r\n                    this.showFieldError(field, this.currentLang === 'en' \r\n                        ? 'Please enter a valid email address' \r\n                        : 'يرجى إدخال بريد إلكتروني صحيح');\r\n                    return false;\r\n                }\r\n                break;\r\n                \r\n            case 'message':\r\n                if (value.length < 10) {\r\n                    this.showFieldError(field, this.currentLang === 'en' \r\n                        ? 'Message is too short (minimum 10 characters)' \r\n                        : 'الرسالة قصيرة جداً (الحد الأدنى 10 أحرف)');\r\n                    return false;\r\n                }\r\n                break;\r\n        }\r\n        \r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Show field error\r\n     */\r\n    showFieldError(field, message) {\r\n        this.clearFieldError(field);\r\n        \r\n        const errorDiv = document.createElement('div');\r\n        errorDiv.className = 'field-error';\r\n        errorDiv.textContent = message;\r\n        errorDiv.style.color = 'var(--error)';\r\n        errorDiv.style.fontSize = '0.85rem';\r\n        errorDiv.style.marginTop = '5px';\r\n        \r\n        field.parentNode.appendChild(errorDiv);\r\n        field.style.borderColor = 'var(--error)';\r\n    }\r\n\r\n    /**\r\n     * Clear field error\r\n     */\r\n    clearFieldError(field) {\r\n        const errorDiv = field.parentNode.querySelector('.field-error');\r\n        if (errorDiv) {\r\n            errorDiv.remove();\r\n        }\r\n        field.style.borderColor = '';\r\n    }\r\n\r\n    /**\r\n     * Validate email format\r\n     */\r\n    isValidEmail(email) {\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n        return emailRegex.test(email);\r\n    }\r\n\r\n    /**\r\n     * Setup copy buttons\r\n     */\r\n    setupCopyButtons() {\r\n        document.querySelectorAll('.copy-btn').forEach(button => {\r\n            button.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                const textToCopy = button.getAttribute('data-text') || button.getAttribute('data-number');\r\n                if (textToCopy) {\r\n                    this.copyToClipboard(textToCopy);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Copy text to clipboard\r\n     */\r\n    copyToClipboard(text) {\r\n        navigator.clipboard.writeText(text).then(() => {\r\n            this.showToast(\r\n                this.currentLang === 'en' ? 'Copied to clipboard!' : 'تم النسخ إلى الحافظة!',\r\n                'success'\r\n            );\r\n        }).catch(err => {\r\n            console.error('Failed to copy: ', err);\r\n            this.showToast(\r\n                this.currentLang === 'en' ? 'Failed to copy text' : 'فشل في نسخ النص',\r\n                'error'\r\n            );\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Setup file upload functionality\r\n     */\r\n    setupFileUpload() {\r\n        const fileUpload = document.getElementById('fileUpload');\r\n        const fileUploadArea = document.getElementById('fileUploadArea');\r\n        const fileList = document.getElementById('fileList');\r\n        \r\n        if (!fileUpload || !fileUploadArea) return;\r\n\r\n        // Click on area to trigger file input\r\n        fileUploadArea.addEventListener('click', () => fileUpload.click());\r\n\r\n        // Handle file selection\r\n        fileUpload.addEventListener('change', () => this.handleFileSelect(fileUpload.files));\r\n\r\n        // Drag and drop functionality\r\n        this.setupDragAndDrop(fileUploadArea, fileUpload);\r\n    }\r\n\r\n    /**\r\n     * Handle file selection\r\n     */\r\n    handleFileSelect(files) {\r\n        const maxSize = 10 * 1024 * 1024; // 10MB\r\n        const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf', \r\n                            'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];\r\n\r\n        for (let file of files) {\r\n            // Check file size\r\n            if (file.size > maxSize) {\r\n                this.showToast(\r\n                    this.currentLang === 'en' \r\n                        ? `File \"${file.name}\" is too large (max 10MB)` \r\n                        : `الملف \"${file.name}\" كبير جداً (الحد الأقصى 10 ميجابايت)`,\r\n                    'error'\r\n                );\r\n                continue;\r\n            }\r\n\r\n            // Check file type\r\n            if (!allowedTypes.includes(file.type) && \r\n                !file.name.match(/\\.(jpg|jpeg|png|pdf|doc|docx)$/i)) {\r\n                this.showToast(\r\n                    this.currentLang === 'en' \r\n                        ? `File type not supported for \"${file.name}\"` \r\n                        : `نوع الملف غير مدعوم لـ \"${file.name}\"`,\r\n                    'error'\r\n                );\r\n                continue;\r\n            }\r\n\r\n            // Add file to list\r\n            this.files.push(file);\r\n        }\r\n\r\n        this.updateFileList();\r\n    }\r\n\r\n    /**\r\n     * Setup drag and drop\r\n     */\r\n    setupDragAndDrop(dropArea, fileInput) {\r\n        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\r\n            dropArea.addEventListener(eventName, this.preventDefaults, false);\r\n        });\r\n\r\n        ['dragenter', 'dragover'].forEach(eventName => {\r\n            dropArea.addEventListener(eventName, () => this.highlight(dropArea), false);\r\n        });\r\n\r\n        ['dragleave', 'drop'].forEach(eventName => {\r\n            dropArea.addEventListener(eventName, () => this.unhighlight(dropArea), false);\r\n        });\r\n\r\n        dropArea.addEventListener('drop', (e) => this.handleDrop(e, fileInput), false);\r\n    }\r\n\r\n    /**\r\n     * Prevent default drag behaviors\r\n     */\r\n    preventDefaults(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    /**\r\n     * Highlight drop area\r\n     */\r\n    highlight(element) {\r\n        element.classList.add('highlight');\r\n    }\r\n\r\n    /**\r\n     * Unhighlight drop area\r\n     */\r\n    unhighlight(element) {\r\n        element.classList.remove('highlight');\r\n    }\r\n\r\n    /**\r\n     * Handle file drop\r\n     */\r\n    handleDrop(e, fileInput) {\r\n        const dt = e.dataTransfer;\r\n        const files = dt.files;\r\n        \r\n        // Create a new DataTransfer object to set files\r\n        const dataTransfer = new DataTransfer();\r\n        for (let file of files) {\r\n            dataTransfer.items.add(file);\r\n        }\r\n        fileInput.files = dataTransfer.files;\r\n        \r\n        // Trigger change event\r\n        const event = new Event('change', { bubbles: true });\r\n        fileInput.dispatchEvent(event);\r\n    }\r\n\r\n    /**\r\n     * Update file list display\r\n     */\r\n    updateFileList() {\r\n        const fileList = document.getElementById('fileList');\r\n        if (!fileList) return;\r\n\r\n        fileList.innerHTML = '';\r\n\r\n        if (this.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // Create header\r\n        const header = document.createElement('div');\r\n        header.className = 'file-list-header';\r\n        header.innerHTML = `\r\n            <span>${this.currentLang === 'en' \r\n                ? `${this.files.length} file(s) selected` \r\n                : `تم اختيار ${this.files.length} ملف(ات)`}</span>\r\n            <button type=\"button\" class=\"clear-files-btn\">\r\n                ${this.currentLang === 'en' ? 'Clear All' : 'مسح الكل'}\r\n            </button>\r\n        `;\r\n        fileList.appendChild(header);\r\n\r\n        // Add clear all functionality\r\n        header.querySelector('.clear-files-btn').addEventListener('click', () => {\r\n            this.files = [];\r\n            document.getElementById('fileUpload').value = '';\r\n            this.updateFileList();\r\n        });\r\n\r\n        // List files\r\n        this.files.forEach((file, index) => {\r\n            const fileItem = this.createFileItem(file, index);\r\n            fileList.appendChild(fileItem);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Create file list item\r\n     */\r\n    createFileItem(file, index) {\r\n        const fileItem = document.createElement('div');\r\n        fileItem.className = 'file-item';\r\n        \r\n        // Get file icon\r\n        const fileIcon = this.getFileIcon(file);\r\n        \r\n        // Format file size\r\n        const fileSize = this.formatFileSize(file.size);\r\n        \r\n        fileItem.innerHTML = `\r\n            <div class=\"file-info\">\r\n                <i class=\"fas ${fileIcon}\"></i>\r\n                <div>\r\n                    <span class=\"file-name\">${file.name}</span>\r\n                    <span class=\"file-size\">${fileSize}</span>\r\n                </div>\r\n            </div>\r\n            <button type=\"button\" class=\"remove-file-btn\" data-index=\"${index}\">\r\n                <i class=\"fas fa-times\"></i>\r\n            </button>\r\n        `;\r\n        \r\n        // Add remove functionality\r\n        fileItem.querySelector('.remove-file-btn').addEventListener('click', () => {\r\n            this.files.splice(index, 1);\r\n            this.updateFileList();\r\n        });\r\n        \r\n        return fileItem;\r\n    }\r\n\r\n    /**\r\n     * Get file icon based on type\r\n     */\r\n    getFileIcon(file) {\r\n        if (file.type.startsWith('image/')) return 'fa-file-image';\r\n        if (file.type === 'application/pdf') return 'fa-file-pdf';\r\n        if (file.type.includes('word') || file.name.match(/\\.(doc|docx)$/i)) return 'fa-file-word';\r\n        return 'fa-file';\r\n    }\r\n\r\n    /**\r\n     * Format file size\r\n     */\r\n    formatFileSize(bytes) {\r\n        if (bytes === 0) return '0 Bytes';\r\n        const k = 1024;\r\n        const sizes = this.currentLang === 'en' \r\n            ? ['Bytes', 'KB', 'MB', 'GB'] \r\n            : ['بايت', 'كيلوبايت', 'ميجابايت', 'جيجابايت'];\r\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n    }\r\n\r\n    /**\r\n     * Setup quick contact widget\r\n     */\r\n    setupQuickWidget() {\r\n        const widget = document.querySelector('.quick-contact-widget');\r\n        const widgetClose = document.querySelector('.widget-close');\r\n        \r\n        if (!widget || !widgetClose) return;\r\n\r\n        // Show widget after delay\r\n        setTimeout(() => {\r\n            widget.classList.add('active');\r\n        }, 5000);\r\n\r\n        // Close widget\r\n        widgetClose.addEventListener('click', () => {\r\n            widget.classList.remove('active');\r\n        });\r\n\r\n        // Hide on scroll down, show on scroll up\r\n        this.setupWidgetScrollBehavior(widget);\r\n    }\r\n\r\n    /**\r\n     * Setup widget scroll behavior\r\n     */\r\n    setupWidgetScrollBehavior(widget) {\r\n        let lastScrollTop = 0;\r\n        \r\n        window.addEventListener('scroll', () => {\r\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n            \r\n            if (scrollTop > lastScrollTop) {\r\n                // Scrolling down - hide widget\r\n                widget.classList.remove('active');\r\n            } else if (scrollTop < lastScrollTop && scrollTop > 500) {\r\n                // Scrolling up and not at top - show widget\r\n                widget.classList.add('active');\r\n            }\r\n            \r\n            lastScrollTop = scrollTop;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Setup character counter for textarea\r\n     */\r\n    setupCharacterCounter() {\r\n        const messageTextarea = document.getElementById('message');\r\n        const charCount = document.querySelector('.char-count');\r\n        \r\n        if (!messageTextarea || !charCount) return;\r\n\r\n        messageTextarea.addEventListener('input', () => {\r\n            const length = messageTextarea.value.length;\r\n            const maxLength = 2000;\r\n            \r\n            charCount.textContent = `${length}/${maxLength} ${this.currentLang === 'en' ? 'characters' : 'حرف'}`;\r\n            \r\n            // Update color based on length\r\n            if (length > maxLength * 0.95) {\r\n                charCount.style.color = 'var(--error)';\r\n            } else if (length > maxLength * 0.8) {\r\n                charCount.style.color = 'var(--warning)';\r\n            } else {\r\n                charCount.style.color = 'var(--gray)';\r\n            }\r\n            \r\n            // Trim if exceeds max length\r\n            if (length > maxLength) {\r\n                messageTextarea.value = messageTextarea.value.substring(0, maxLength);\r\n                charCount.textContent = `${maxLength}/${maxLength} ${this.currentLang === 'en' ? 'characters' : 'حرف'}`;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Setup FAQ accordion\r\n     */\r\n    setupFAQAccordion() {\r\n        const faqItems = document.querySelectorAll('.faq-item');\r\n        \r\n        faqItems.forEach(item => {\r\n            const question = item.querySelector('.faq-question');\r\n            \r\n            question.addEventListener('click', () => {\r\n                // Close all other items\r\n                faqItems.forEach(otherItem => {\r\n                    if (otherItem !== item && otherItem.classList.contains('active')) {\r\n                        otherItem.classList.remove('active');\r\n                    }\r\n                });\r\n                \r\n                // Toggle current item\r\n                item.classList.toggle('active');\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Setup scroll to top button\r\n     */\r\n    setupScrollToTop() {\r\n        const scrollBtn = document.getElementById('scrollToTop');\r\n        \r\n        if (!scrollBtn) return;\r\n\r\n        // Show/hide button based on scroll position\r\n        window.addEventListener('scroll', () => {\r\n            if (window.pageYOffset > 300) {\r\n                scrollBtn.classList.add('visible');\r\n            } else {\r\n                scrollBtn.classList.remove('visible');\r\n            }\r\n        });\r\n\r\n        // Scroll to top on click\r\n        scrollBtn.addEventListener('click', () => {\r\n            window.scrollTo({\r\n                top: 0,\r\n                behavior: 'smooth'\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Setup language change listener\r\n     */\r\n    setupLanguageListener() {\r\n        // Listen for language changes\r\n        document.addEventListener('languageChanged', (e) => {\r\n            this.currentLang = e.detail.language;\r\n            this.updateContentLanguage();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update content based on language\r\n     */\r\n    updateContentLanguage() {\r\n        // Update map popups\r\n        if (this.map) {\r\n            this.map.eachLayer((layer) => {\r\n                if (layer.bindPopup) {\r\n                    const popup = layer.getPopup();\r\n                    if (popup) {\r\n                        // You would need to store which marker is which\r\n                        // and update the popup content accordingly\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Show toast notification\r\n     */\r\n    showToast(message, type = 'info') {\r\n        // Remove existing toasts\r\n        document.querySelectorAll('.toast-message').forEach(toast => toast.remove());\r\n        \r\n        const toast = document.createElement('div');\r\n        toast.className = `toast-message ${type}`;\r\n        toast.textContent = message;\r\n        document.body.appendChild(toast);\r\n        \r\n        // Remove after animation\r\n        setTimeout(() => {\r\n            if (toast.parentNode) {\r\n                toast.parentNode.removeChild(toast);\r\n            }\r\n        }, 3000);\r\n    }\r\n\r\n    /**\r\n     * Track form submission (for analytics)\r\n     */\r\n    trackFormSubmission(formData) {\r\n        // You can implement analytics tracking here\r\n        console.log('Form submitted:', {\r\n            serviceType: formData.serviceType,\r\n            urgency: formData.urgency,\r\n            timestamp: formData.timestamp\r\n        });\r\n        \r\n        // Example: Send to Google Analytics\r\n        if (typeof gtag !== 'undefined') {\r\n            gtag('event', 'form_submission', {\r\n                'event_category': 'contact',\r\n                'event_label': formData.serviceType\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n// Initialize when DOM is loaded\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    new ContactPage();\r\n});\r\n\r\n"],"file":"contact.dev.js"}